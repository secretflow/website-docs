---
git_download_url: https://github.com/secretflow/secretpad/raw/4fb9e56424b39c68b2c822c818cd2fbba5fee509/docs/development/build_secretpad_cn.md
git_last_modified_commit: a40fe81613193c0027034d522225ba0a69f8b7a5
git_last_modified_time: '2023-09-07T16:56:48+08:00'
git_origin_url: https://github.com/secretflow/secretpad/blob/4fb9e56424b39c68b2c822c818cd2fbba5fee509/docs/development/build_secretpad_cn.md
git_owner: secretflow
git_repo: secretpad
git_revision_commit: 4fb9e56424b39c68b2c822c818cd2fbba5fee509
git_revision_time: '2023-11-30T14:17:13+08:00'
---

:target{#id1}

# 构建命令

:target{#id2}

## 开发环境搭建

:target{#id3}

### 开发环境依赖

- JDK: 17
- Maven: 3.5+
- Docker

:target{#secretpad}

## 构建 SecretPad

SecrtPad 提供了 Makefile 来构建项目，你可以通过`make help`命令查看命令帮助，其中 Development 部分提供了构建能力：

```shell
Usage:
  make <target>

General
  help              Display this help.

Development
  test              Run tests.
  build             Build scretpad binary.
  image             Build docker image with the manager.
  docs              Build docs.
  pack              Build pack all in one with tar.gz.
```

:target{#id4}

### 测试

在 SecretPad 项目根目录下：

执行`make test`命令，该命令将会执行项目中所有的测试

:target{#jar}

### 构建可执行JAR文件

在 SecretPad 项目根目录下：

执行`make build`命令，该命令将会构建出 SecretPad 的可执行JAR，构建产物会生成在 ./target/ 目录下。

:target{#secretpad-image}

### 构建 SecretPad Image

在 SecretPad 项目根目录下：

执行`make image`命令，该命令将会使用 Docker 命令构建出 SecretPad 镜像。目前 SecretPad 暂时仅支持构建 linux/amd64 的 Anolis 镜像。

:target{#id5}

### 编译文档

在 SecretPad 项目根目录下：

执行`make docs`命令，该命令会生成 SecretPad 文档，生成的文档会放在 `docs/_build/html` 目录，用浏览器打开 `docs/_build/html/index.html` 就可以查看文档。

该命令依赖于 python 环境，并且已经安装了 pip 工具；编译文档前请提前安装，否则会执行错误。

:target{#allinone-package}

### 构建 allinone-package

在 SecretPad 项目根目录下：

执行`make pack`命令，该命令会生成 secretflow-allinone-package-\{github-tag}.tar.gz
包含kuscia镜像、secretflow镜像、secretpad镜像、一键安装脚本、一键卸载脚本。

该命令执行结果依赖 环境变量配置，不配置默认使用最新的镜像

```shell
KUSCIA_IMAGE=""
SECRETPAD_IMAGE=""
SECRETFLOW_IMAGE=""

# 默认
KUSCIA_IMAGE=secretflow-registry.cn-hangzhou.cr.aliyuncs.com/secretflow/kuscia:latest
SECRETPAD_IMAGE=secretflow-registry.cn-hangzhou.cr.aliyuncs.com/secretflow/secretpad:latest
SECRETFLOW_IMAGE=secretflow-registry.cn-hangzhou.cr.aliyuncs.com/secretflow/secretflow-lite-anolis8:latest
```
