:target{#domain}

# Domain

在 Kuscia 中将隐私计算的节点称为 Domain，一个 Domain 中可以包含多个 K8s 的工作节点（Node）。详情请参考 [Domain](../concepts/domain_cn.mdx) 。
你可以从 [这里](https://github.com/secretflow/kuscia/tree/main/proto/api/v1alpha1/kusciaapi/domain.proto) 找到 Domain 对应的 protobuf 文件。

:target{#id1}

## 接口总览

<table>
  <thead>
    <tr>
      <td>
        方法名
      </td>

      <td>
        请求类型
      </td>

      <td>
        响应类型
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [CreateDomain](#create-domain)
      </td>

      <td>
        CreateDomainRequest
      </td>

      <td>
        CreateDomainResponse
      </td>

      <td>
        创建节点
      </td>
    </tr>

    <tr>
      <td>
        [UpdateDomain](#update-domain)
      </td>

      <td>
        UpdateDomainRequest
      </td>

      <td>
        UpdateDomainResponse
      </td>

      <td>
        更新节点
      </td>
    </tr>

    <tr>
      <td>
        [DeleteDomain](#delete-domain)
      </td>

      <td>
        DeleteDomainRequest
      </td>

      <td>
        DeleteDomainResponse
      </td>

      <td>
        删除节点
      </td>
    </tr>

    <tr>
      <td>
        [QueryDomain](#query-domain)
      </td>

      <td>
        QueryDomainRequest
      </td>

      <td>
        QueryDomainResponse
      </td>

      <td>
        查询节点
      </td>
    </tr>

    <tr>
      <td>
        [BatchQueryDomainStatus](#batch-query-domain-status)
      </td>

      <td>
        BatchQueryDomainStatusRequest
      </td>

      <td>
        BatchQueryDomainStatusResponse
      </td>

      <td>
        批量查询节点状态
      </td>
    </tr>
  </tbody>
</table>

:target{#id2}

## 接口详情

:target{#create-domain}

### 创建节点

:target{#http}

#### HTTP路径

/api/v1/domain/create

:target{#createdomainrequest}

#### 请求（CreateDomainRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#request-header)
      </td>

      <td>
        是
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        domain\_id
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        节点ID
      </td>
    </tr>

    <tr>
      <td>
        role
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        角色：\[“”, “partner”]，参考 [<span>Domain概念</span>](../concepts/domain_cn.mdx)
      </td>
    </tr>

    <tr>
      <td>
        cert
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        BASE64的计算节点证书，参考 [<span>Domain概念</span>](../concepts/domain_cn.mdx)
      </td>
    </tr>
  </tbody>
</table>

:target{#createdomainresponse}

#### 响应（CreateDomainResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        否
      </td>

      <td>
        状态信息
      </td>
    </tr>
  </tbody>
</table>

:target{#update-domain}

### 更新节点

:target{#id3}

#### HTTP路径

/api/v1/domain/update

:target{#updatedomainrequest}

#### 请求（UpdateDomainRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#request-header)
      </td>

      <td>
        是
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        domain\_id
      </td>

      <td>
        string
      </td>

      <td>
        是
      </td>

      <td>
        节点ID
      </td>
    </tr>

    <tr>
      <td>
        role
      </td>

      <td>
        string
      </td>

      <td>
        是
      </td>

      <td>
        角色：\[“”, “partner”]，参考 [<span>Domain概念</span>](../concepts/domain_cn.mdx)
      </td>
    </tr>

    <tr>
      <td>
        cert
      </td>

      <td>
        string
      </td>

      <td>
        是
      </td>

      <td>
        BASE64的计算节点证书，参考 [<span>Domain概念</span>](../concepts/domain_cn.mdx)
      </td>
    </tr>
  </tbody>
</table>

:target{#updatedomainresponse}

#### 响应（UpdateDomainResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        否
      </td>

      <td>
        状态信息
      </td>
    </tr>
  </tbody>
</table>

:target{#delete-domain}

### 删除节点

:target{#id4}

#### HTTP路径

/api/v1/domain/delete

:target{#deletedomainrequest}

#### 请求（DeleteDomainRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#request-header)
      </td>

      <td>
        是
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        domain\_id
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        节点ID
      </td>
    </tr>
  </tbody>
</table>

:target{#deletedomainresponse}

#### 响应（DeleteDomainResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        否
      </td>

      <td>
        状态信息
      </td>
    </tr>
  </tbody>
</table>

:target{#query-domain}

### 查询节点

:target{#id5}

#### HTTP路径

/api/v1/domain/query

:target{#querydomainrequest}

#### 请求（QueryDomainRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#request-header)
      </td>

      <td>
        是
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        domain\_id
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        节点ID
      </td>
    </tr>
  </tbody>
</table>

:target{#querydomainresponse}

#### 响应（QueryDomainResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        否
      </td>

      <td>
        状态信息
      </td>
    </tr>

    <tr>
      <td>
        data
      </td>

      <td>
        QueryDomainResponseData
      </td>

      <td>

      </td>

      <td>

      </td>
    </tr>

    <tr>
      <td>
        data.domain\_id
      </td>

      <td>
        string
      </td>

      <td>
        是
      </td>

      <td>
        节点ID
      </td>
    </tr>

    <tr>
      <td>
        data.role
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        角色：\[“”, “partner”]，参考 [<span>Domain概念</span>](../concepts/domain_cn.mdx)
      </td>
    </tr>

    <tr>
      <td>
        data.cert
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        BASE64的计算节点证书，参考 [<span>Domain概念</span>](../concepts/domain_cn.mdx)
      </td>
    </tr>

    <tr>
      <td>
        data.node\_statuses
      </td>

      <td>
        [NodeStatus](#node-status)\[]
      </td>

      <td>
        否
      </td>

      <td>
        物理节点状态
      </td>
    </tr>
  </tbody>
</table>

:target{#batch-query-domain-status}

### 批量查询节点状态

:target{#id6}

#### HTTP路径

/api/v1/domain/status/batchQuery

:target{#batchquerydomainstatusrequest}

#### 请求（BatchQueryDomainStatusRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#request-header)
      </td>

      <td>
        是
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        domain\_ids
      </td>

      <td>
        string\[]
      </td>

      <td>
        否
      </td>

      <td>
        待查询的节点ID列表
      </td>
    </tr>
  </tbody>
</table>

:target{#batchquerydomainstatusresponse}

#### 响应（ BatchQueryDomainStatusResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        否
      </td>

      <td>
        状态信息
      </td>
    </tr>

    <tr>
      <td>
        data
      </td>

      <td>
        BatchQueryDomainStatusResponseData
      </td>

      <td>
        否
      </td>

      <td>

      </td>
    </tr>

    <tr>
      <td>
        data.domains
      </td>

      <td>
        [DomainStatus](#domain-status)\[]
      </td>

      <td>
        否
      </td>

      <td>
        节点列表
      </td>
    </tr>
  </tbody>
</table>

:target{#id7}

## 公共

:target{#domain-status}

### DomainStatus

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        domain\_id
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        节点ID
      </td>
    </tr>

    <tr>
      <td>
        node\_statuses
      </td>

      <td>
        [NodeStatus](#node-status)\[]
      </td>

      <td>
        否
      </td>

      <td>
        真实物理节点状态
      </td>
    </tr>
  </tbody>
</table>

:target{#node-status}

### NodeStatus

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        可选
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        name
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        节点名称
      </td>
    </tr>

    <tr>
      <td>
        status
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        节点状态
      </td>
    </tr>

    <tr>
      <td>
        version
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        节点Agent版本
      </td>
    </tr>

    <tr>
      <td>
        last\_heartbeat\_time
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        最后心跳时间，RFC3339格式（e.g. 2006-01-02T15:04:05Z）
      </td>
    </tr>

    <tr>
      <td>
        last\_transition\_time
      </td>

      <td>
        string
      </td>

      <td>
        否
      </td>

      <td>
        最后更新时间，RFC3339格式（e.g. 2006-01-02T15:04:05Z）
      </td>
    </tr>
  </tbody>
</table>
