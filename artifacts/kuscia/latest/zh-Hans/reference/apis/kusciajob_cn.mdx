---
git_download_url: https://github.com/secretflow/kuscia/raw/3f51ec86d7b9c4f34fb14819559cb1ce251e5c75/docs/reference/apis/kusciajob_cn.md
git_last_modified_commit: c4523156169f0d0720d8b3523127447a6d098ad8
git_last_modified_time: '2023-10-30T11:52:56+08:00'
git_origin_url: https://github.com/secretflow/kuscia/blob/3f51ec86d7b9c4f34fb14819559cb1ce251e5c75/docs/reference/apis/kusciajob_cn.md
git_owner: secretflow
git_repo: kuscia
git_revision_commit: 3f51ec86d7b9c4f34fb14819559cb1ce251e5c75
git_revision_time: '2023-12-06T13:38:00+08:00'
---

:target{#kusciajob}

# KusciaJob

在 Kuscia 中，你可以使用 KusciaJob 来表示一个任务流程。请参考 [KusciaJob](../concepts/kusciajob_cn.mdx) 。
你可以从 [这里](https://github.com/secretflow/kuscia/tree/main/proto/api/v1alpha1/kusciaapi/job.proto) 找到对应的
protobuf 文件。

:target{#id1}

## 接口总览

<table>
  <thead>
    <tr>
      <td>
        方法名
      </td>

      <td>
        请求类型
      </td>

      <td>
        响应类型
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [CreateJob](#create-job)
      </td>

      <td>
        CreateJobRequest
      </td>

      <td>
        CreateJobResponse
      </td>

      <td>
        创建 Job
      </td>
    </tr>

    <tr>
      <td>
        [QueryJob](#query-job)
      </td>

      <td>
        QueryJobRequest
      </td>

      <td>
        QueryJobResponse
      </td>

      <td>
        查询 Job
      </td>
    </tr>

    <tr>
      <td>
        [BatchQueryJobStatus](#batch-query-job-status)
      </td>

      <td>
        BatchQueryJobStatusRequest
      </td>

      <td>
        BatchQueryJobStatusResponse
      </td>

      <td>
        批量查询 Job 状态
      </td>
    </tr>

    <tr>
      <td>
        [DeleteJob](#delete-job)
      </td>

      <td>
        DeleteJobRequest
      </td>

      <td>
        DeleteJobResponse
      </td>

      <td>
        删除 Job
      </td>
    </tr>

    <tr>
      <td>
        [StopJob](#stop-job)
      </td>

      <td>
        StopJobRequest
      </td>

      <td>
        StopJobResponse
      </td>

      <td>
        停止 Job
      </td>
    </tr>

    <tr>
      <td>
        [WatchJob](#watch-job)
      </td>

      <td>
        WatchJobRequest
      </td>

      <td>
        WatchJobEventResponse stream
      </td>

      <td>
        监控 Job
      </td>
    </tr>
  </tbody>
</table>

:target{#id2}

## 接口详情

:target{#create-job}

### 创建 Job

:target{#http}

#### HTTP 路径

/api/v1/job/create

:target{#createjobrequest}

#### 请求（CreateJobRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#requestheader)
      </td>

      <td>
        可选
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        job\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        JobID，满足 [DNS 子域名规则要求](https://kubernetes.io/zh-cn/docs/concepts/overview/working-with-objects/names/#dns-subdomain-names)
      </td>
    </tr>

    <tr>
      <td>
        initiator
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        发起方节点 ID
      </td>
    </tr>

    <tr>
      <td>
        max\_parallelism
      </td>

      <td>
        int32
      </td>

      <td>
        可选
      </td>

      <td>
        并发度，参考 [<span>KusciaJob 概念</span>](../concepts/kusciajob_cn.mdx)
      </td>
    </tr>

    <tr>
      <td>
        tasks
      </td>

      <td>
        [Task](#task)\[]
      </td>

      <td>
        必填
      </td>

      <td>
        任务参数
      </td>
    </tr>
  </tbody>
</table>

:target{#createjobresponse}

#### 响应（CreateJobResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        必填
      </td>

      <td>
        状态信息
      </td>
    </tr>

    <tr>
      <td>
        data
      </td>

      <td>
        CreateJobResponseData
      </td>

      <td>

      </td>

      <td>

      </td>
    </tr>

    <tr>
      <td>
        data.job\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        JobID
      </td>
    </tr>
  </tbody>
</table>

:target{#query-job}

### 查询 Job

:target{#id3}

#### HTTP 路径

/api/v1/job/query

:target{#queryjobrequest}

#### 请求（QueryJobRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#requestheader)
      </td>

      <td>
        可选
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        job\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        JobID
      </td>
    </tr>
  </tbody>
</table>

:target{#queryjobresponse}

#### 响应（QueryJobResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        必填
      </td>

      <td>
        状态信息
      </td>
    </tr>

    <tr>
      <td>
        data
      </td>

      <td>
        QueryJobResponseData
      </td>

      <td>

      </td>

      <td>

      </td>
    </tr>

    <tr>
      <td>
        data.job\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        JobID
      </td>
    </tr>

    <tr>
      <td>
        data.initiator
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        发起方
      </td>
    </tr>

    <tr>
      <td>
        data.max\_parallelism
      </td>

      <td>
        int32
      </td>

      <td>
        必填
      </td>

      <td>
        并发度
      </td>
    </tr>

    <tr>
      <td>
        data.tasks
      </td>

      <td>
        [TaskConfig](#task-config)\[]
      </td>

      <td>
        必填
      </td>

      <td>
        任务列表
      </td>
    </tr>

    <tr>
      <td>
        data.status
      </td>

      <td>
        [JobStatusDetail](#job-status-detail)
      </td>

      <td>
        必填
      </td>

      <td>
        Job 状态
      </td>
    </tr>
  </tbody>
</table>

:target{#batch-query-job-status}

### 批量查询 Job 状态

:target{#id4}

#### HTTP 路径

/api/v1/job/status/batchQuery

:target{#batchqueryjobstatusrequest}

#### 请求（BatchQueryJobStatusRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#requestheader)
      </td>

      <td>
        可选
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        job\_ids
      </td>

      <td>
        string\[]
      </td>

      <td>
        必填
      </td>

      <td>
        JobID 列表
      </td>
    </tr>
  </tbody>
</table>

:target{#batchqueryjobstatusresponse}

#### 响应（BatchQueryJobStatusResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        必填
      </td>

      <td>
        状态信息
      </td>
    </tr>

    <tr>
      <td>
        data
      </td>

      <td>
        BatchQueryJobStatusResponseData
      </td>

      <td>

      </td>

      <td>

      </td>
    </tr>

    <tr>
      <td>
        data.jobs
      </td>

      <td>
        [JobStatus](#job-status)\[]
      </td>

      <td>
        必填
      </td>

      <td>
        Job 状态列表
      </td>
    </tr>
  </tbody>
</table>

:target{#delete-job}

### 删除 Job

:target{#id5}

#### HTTP 路径

/api/v1/job/delete

:target{#deletejobrequest}

#### 请求（DeleteJobRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#requestheader)
      </td>

      <td>
        可选
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        job\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        JobID
      </td>
    </tr>
  </tbody>
</table>

:target{#deletejobresponse}

#### 响应（DeleteJobResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        必填
      </td>

      <td>
        状态信息
      </td>
    </tr>

    <tr>
      <td>
        data
      </td>

      <td>
        DeleteJobResponseData
      </td>

      <td>

      </td>

      <td>

      </td>
    </tr>

    <tr>
      <td>
        data.job\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        JobID
      </td>
    </tr>
  </tbody>
</table>

:target{#stop-job}

### 停止 Job

:target{#id6}

#### HTTP 路径

/api/v1/job/stop

:target{#stopjobrequest}

#### 请求（StopJobRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#requestheader)
      </td>

      <td>
        可选
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        job\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        JobID
      </td>
    </tr>
  </tbody>
</table>

:target{#stopjobresponse}

#### 响应（StopJobResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        status
      </td>

      <td>
        [<span>Status</span>](summary_cn.mdx#status)
      </td>

      <td>
        必填
      </td>

      <td>
        状态信息
      </td>
    </tr>

    <tr>
      <td>
        data
      </td>

      <td>
        StopJobResponseData
      </td>

      <td>

      </td>

      <td>

      </td>
    </tr>

    <tr>
      <td>
        data.job\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        JobID
      </td>
    </tr>
  </tbody>
</table>

:target{#watch-job}

### 监控 Job

:target{#id7}

#### HTTP 路径

暂不支持 HTTP 接口。

:target{#watchjobrequest}

#### 请求（WatchJobRequest）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        header
      </td>

      <td>
        [<span>RequestHeader</span>](summary_cn.mdx#requestheader)
      </td>

      <td>
        可选
      </td>

      <td>
        自定义请求内容
      </td>
    </tr>

    <tr>
      <td>
        timeout\_seconds
      </td>

      <td>
        int64
      </td>

      <td>
        可选
      </td>

      <td>
        超时时间
      </td>
    </tr>
  </tbody>
</table>

:target{#watchjobeventresponse}

#### 响应（WatchJobEventResponse）

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        类型
      </td>

      <td>
        [EventType](#event-type)
      </td>

      <td>
        必填
      </td>

      <td>
        事件类型
      </td>
    </tr>

    <tr>
      <td>
        object
      </td>

      <td>
        [JobStatus](#job-status)
      </td>

      <td>
        必填
      </td>

      <td>
        Job 状态
      </td>
    </tr>
  </tbody>
</table>

:target{#id8}

## 公共

:target{#job-status}

### JobStatus

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        job\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        JobID
      </td>
    </tr>

    <tr>
      <td>
        status
      </td>

      <td>
        [JobStatusDetail](#job-status-detail)
      </td>

      <td>
        必填
      </td>

      <td>
        Job 状态详情
      </td>
    </tr>
  </tbody>
</table>

:target{#job-status-detail}

### JobStatusDetail

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        state
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        总体状态
      </td>
    </tr>

    <tr>
      <td>
        err\_msg
      </td>

      <td>
        string
      </td>

      <td>
        可选
      </td>

      <td>
        错误信息
      </td>
    </tr>

    <tr>
      <td>
        create\_time
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        创建时间
      </td>
    </tr>

    <tr>
      <td>
        start\_time
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        启动时间
      </td>
    </tr>

    <tr>
      <td>
        end\_time
      </td>

      <td>
        string
      </td>

      <td>
        可选
      </td>

      <td>
        结束时间
      </td>
    </tr>

    <tr>
      <td>
        tasks
      </td>

      <td>
        [TaskStatus](#task-status)\[]
      </td>

      <td>
        必填
      </td>

      <td>
        任务列表
      </td>
    </tr>
  </tbody>
</table>

:target{#party}

### Party

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        domain\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        DomainID
      </td>
    </tr>

    <tr>
      <td>
        role
      </td>

      <td>
        string
      </td>

      <td>
        可选
      </td>

      <td>
        角色
      </td>
    </tr>
  </tbody>
</table>

:target{#party-status}

### PartyStatus

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        domain\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        节点 ID
      </td>
    </tr>

    <tr>
      <td>
        state
      </td>

      <td>
        [TaskState](#task-state)
      </td>

      <td>
        必填
      </td>

      <td>
        总体状态
      </td>
    </tr>

    <tr>
      <td>
        err\_msg
      </td>

      <td>
        string
      </td>

      <td>
        可选
      </td>

      <td>
        错误信息
      </td>
    </tr>
  </tbody>
</table>

:target{#task}

### Task

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        app\_image
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        任务镜像
      </td>
    </tr>

    <tr>
      <td>
        parties
      </td>

      <td>
        [Party](#party)\[]
      </td>

      <td>
        必填
      </td>

      <td>
        参与方节点 ID
      </td>
    </tr>

    <tr>
      <td>
        alias
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        任务别名
      </td>
    </tr>

    <tr>
      <td>
        task\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        任务 ID，满足 [DNS 子域名规则要求](https://kubernetes.io/zh-cn/docs/concepts/overview/working-with-objects/names/#dns-subdomain-names)
      </td>
    </tr>

    <tr>
      <td>
        dependencies
      </td>

      <td>
        string\[]
      </td>

      <td>
        必填
      </td>

      <td>
        依赖任务
      </td>
    </tr>

    <tr>
      <td>
        task\_input\_config
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        任务配置
      </td>
    </tr>

    <tr>
      <td>
        priority
      </td>

      <td>
        string
      </td>

      <td>
        可选
      </td>

      <td>
        优先级，值越大优先级越高
      </td>
    </tr>
  </tbody>
</table>

:target{#task-config}

### TaskConfig

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        app\_image
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        任务镜像
      </td>
    </tr>

    <tr>
      <td>
        parties
      </td>

      <td>
        [Party](#party)\[]
      </td>

      <td>
        必填
      </td>

      <td>
        参与方
      </td>
    </tr>

    <tr>
      <td>
        alias
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        任务别名
      </td>
    </tr>

    <tr>
      <td>
        task\_id
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        任务 ID
      </td>
    </tr>

    <tr>
      <td>
        dependencies
      </td>

      <td>
        string\[]
      </td>

      <td>
        必填
      </td>

      <td>
        依赖任务
      </td>
    </tr>

    <tr>
      <td>
        task\_input\_config
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        任务配置
      </td>
    </tr>

    <tr>
      <td>
        priority
      </td>

      <td>
        string
      </td>

      <td>
        可选
      </td>

      <td>
        优先级，值越大优先级越高
      </td>
    </tr>
  </tbody>
</table>

:target{#task-status}

### TaskStatus

<table>
  <thead>
    <tr>
      <td>
        字段
      </td>

      <td>
        类型
      </td>

      <td>
        选填
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        task\_id
      </td>

      <td>
        string
      </td>

      <td>
        可选
      </td>

      <td>
        任务 ID
      </td>
    </tr>

    <tr>
      <td>
        state
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        任务状态，参考 [TaskState](#task-state)
      </td>
    </tr>

    <tr>
      <td>
        err\_msg
      </td>

      <td>
        string
      </td>

      <td>
        可选
      </td>

      <td>
        错误信息
      </td>
    </tr>

    <tr>
      <td>
        create\_time
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        创建事件
      </td>
    </tr>

    <tr>
      <td>
        start\_time
      </td>

      <td>
        string
      </td>

      <td>
        必填
      </td>

      <td>
        开始事件
      </td>
    </tr>

    <tr>
      <td>
        end\_time
      </td>

      <td>
        string
      </td>

      <td>
        可选
      </td>

      <td>
        结束事件
      </td>
    </tr>

    <tr>
      <td>
        parties
      </td>

      <td>
        [PartyStatus](#party-status)\[]
      </td>

      <td>
        必填
      </td>

      <td>
        参与方
      </td>
    </tr>
  </tbody>
</table>

:target{#event-type}

### EventType

<table>
  <thead>
    <tr>
      <td>
        Name
      </td>

      <td>
        Number
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        ADDED
      </td>

      <td>
        0
      </td>

      <td>
        增加事件
      </td>
    </tr>

    <tr>
      <td>
        MODIFIED
      </td>

      <td>
        1
      </td>

      <td>
        修改事件
      </td>
    </tr>

    <tr>
      <td>
        DELETED
      </td>

      <td>
        2
      </td>

      <td>
        删除事件
      </td>
    </tr>

    <tr>
      <td>
        ERROR
      </td>

      <td>
        3
      </td>

      <td>
        错误事件
      </td>
    </tr>
  </tbody>
</table>

:target{#task-state}

### TaskState

<table>
  <thead>
    <tr>
      <td>
        Name
      </td>

      <td>
        Number
      </td>

      <td>
        描述
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Pending
      </td>

      <td>
        0
      </td>

      <td>
        未开始运行
      </td>
    </tr>

    <tr>
      <td>
        Running
      </td>

      <td>
        1
      </td>

      <td>
        运行中
      </td>
    </tr>

    <tr>
      <td>
        Succeeded
      </td>

      <td>
        2
      </td>

      <td>
        成功
      </td>
    </tr>

    <tr>
      <td>
        Failed
      </td>

      <td>
        3
      </td>

      <td>
        失败
      </td>
    </tr>
  </tbody>
</table>
