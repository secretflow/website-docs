:target{#mysql-compatibility}

# MySQL Compatibility

SCQL is highly compatible with MySQL, but there are still some syntax differences.

:target{#unsupported-features}

## Unsupported Features

1. Partition table
2. Character sets
3. User-defined functions
4. TCL(Transaction Control Language)
5. DML(Data Manipulation Language)

:target{#features-that-are-different-from-mysql}

## Features that are different from MySQL

:target{#ddl-data-definition-language}

### DDL(Data Definition Language)

:target{#create-table}

#### CREATE Table

SCQL get table schemas from GRM, so CREATE TABLE statement must include keyword TID which uniquely identifies a table in GRM. For more information, please read [SCQL Manual](scql_manual.mdx).

:target{#dql-data-query-language}

### DQL(Data Query Language)

About implementation status, please read [SCQL Implementation Status](scql_status.mdx)

<Container type="note">
  Since SCQL only supports floating-point numbers of type float32, please pay attention to the problem of precision loss.

  Type Null is unsupported in SCQL.
</Container>

:target{#functions-different-from-mysql}

#### Functions different from MySQL

<table>
  <thead>
    <tr>
      <td>
        Function Name
      </td>

      <td>
        In SCQL
      </td>

      <td>
        In MySQL
      </td>

      <td>
        Note
      </td>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        SUM(INT)
      </td>

      <td>
        returns int
      </td>

      <td>
        returns Decimal/Double
      </td>

      <td />
    </tr>

    <tr>
      <td>
        Aggregation Functions With Group BY
      </td>

      <td>
        return groups which have more than three elements
      </td>

      <td>
        return all groups
      </td>

      <td>
        for safety
      </td>
    </tr>
  </tbody>
</table>

:target{#dcl-data-control-language}

### DCL(Data Control Language)

:target{#grant-revoke}

#### GRANT/REVOKE

Except permissions same with mysql such as read/write/create/drop…, ccl settings are also required before executing a query. You can change CCL settings via GRANT/REVOKE. About GRANT/REVOKE in SCQL, please read [SCQL Manual](scql_manual.mdx).

:target{#type-conversion-rule}

### Type Conversion Rule

Type conversion takes place when using an operator with operands of different types, to make them compatible. Some conversions occur implicitly.
For example, SCQL automatically converts int to float as necessary

```bash
user> SELECT alice.plain_long AS alice_long, bob.plain_float AS bob_float, alice.plain_long + bob.plain_float AS sum_result FROM alice INNER JOIN bob ON alice.id = bob.id;
+------------+-----------+------------+
| alice_long | bob_float | sum_result |
+------------+-----------+------------+
| -1         | -1.5      | -2.5       |
| 0          | 0.5       | 0.5        |
| 1          | 1.5       | 2.5        |
+------------+-----------+------------+
```

The following rules describe how conversion occurs in SCQL.

:target{#single-party-query}

#### single-party query

If a query only involves one participant, SCQL will convert the query into a syntax that conforms to the participant’s database (such as MySQL),
and then dispatch it directly to the corresponding database for execution. Thus, for a single-party query, its type conversion rules are generally
consistent with the database used by the participant.

:target{#multi-party-query}

#### multi-party query

If a query involves multiple participants, SCQL will execute type conversion by applying the following rules.

:target{#compare}

##### Compare(>, \<, \<=, >=, \<>, =, !=)

- Both arguments in a comparison operation shouldn’t be string.
- If both arguments are long, they are compared as long.
- If one of the arguments is float32, the other argument will be compared as float32.

:target{#arithmetic}

##### Arithmetic(+, -, \*, /, %)

- Both arguments in a arithmetic operation shouldn’t be string.
- If both arguments are long, they are calculated as long.
- If one of the arguments is float32, the other argument will be calculated as float32.

:target{#aggregation-sum-count-avg-min-max}

##### Aggregation(sum, count, avg, min, max)

- All arguments in a aggregation function shouldn’t be string.
- If all arguments are long, they are calculated as long.
- If one of the arguments is float32, the other argument will be calculated as float32.
