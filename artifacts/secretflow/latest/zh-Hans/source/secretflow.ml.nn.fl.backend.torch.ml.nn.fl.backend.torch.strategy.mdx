:target{#secretflow-ml-nn-fl-backend-torch-strategy-package}

# secretflow\.ml.nn.fl.backend.torch.strategy package

:target{#submodules}

## Submodules

:target{id="module-secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g"}

## secretflow\.ml.nn.fl.backend.torch.strategy.fed\_avg\_g module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [<code>FedAvgG</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.FedAvgG "secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.FedAvgG")(builder\_base\[, random\_seed])
      </td>

      <td>
        FedAvgG: An implementation of FedAvg, where the clients upload their accumulated gradients during the federated round to the server for averaging and update their local models using the aggregated gradients from the server in each federated round.
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedAvgG</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.PYUFedAvgG "secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.PYUFedAvgG")
      </td>

      <td>
        <code>ActorProxy(PYUFedAvgG)</code> 的别名
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.FedAvgG"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g"} fullname={"FedAvgG"} parameters={["builder_base", "random_seed"]} description={"\u57fa\u7c7b\uff1aBaseTorchModel"}>
  <Outline.Signature fullname="FedAvgG" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.FedAvgG">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_avg\_g.</Outline.Prefix><Outline.Name>FedAvgG</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">builder\_base</span><span>:</span><span>{" "}</span><span className="name">[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "（在 Python v3.11）")<span>\[</span><span>\[</span><span>]</span><span>,</span><span>{" "}</span>[TorchModel](secretflow.ml.ml.nn.mdx#secretflow.ml.nn.utils.TorchModel "secretflow.ml.nn.utils.TorchModel")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_seed</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "（在 Python v3.11）")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    基类：[<code>BaseTorchModel</code>](secretflow.ml.nn.fl.backend.ml.nn.fl.backend.torch.mdx#secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel "secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel")

    FedAvgG: An implementation of FedAvg, where the clients upload their accumulated
    gradients during the federated round to the server for averaging and update their
    local models using the aggregated gradients from the server in each federated round.

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [<code>train\_step</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.FedAvgG.train_step "secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.FedAvgG.train_step")(gradients, cur\_steps, ...)
          </td>

          <td>
            Accept ps model params, then do local train
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.FedAvgG.train_step"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g"} fullname={"FedAvgG.train_step"} parameters={["gradients", "cur_steps", "train_steps", "kwargs"]} description={"Accept ps model params, then do local train"}>
      <Outline.Signature fullname="FedAvgG.train_step" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.FedAvgG.train_step">
        <Outline.Name>train\_step</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">gradients</span><span>:</span><span>{" "}</span><span className="name">[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">cur\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">train\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span>\*\*</span><span className="name">kwargs</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[Tuple](https://docs.python.org/3/library/typing.html#typing.Tuple "（在 Python v3.11）")<span>\[</span>[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")<span>,</span><span>{" "}</span>[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>]</span></Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Accept ps model params, then do local train

        <FieldList>
          <dl>
            <dt className="field-name">
              参数
            </dt>

            <dd className="field-body">
              - <strong>gradients</strong> – global gradients from params server
              - <strong>cur\_steps</strong> – current train step
              - <strong>train\_steps</strong> – local training steps
              - <strong>kwargs</strong> – strategy-specific parameters
            </dd>

            <dt className="field-name">
              返回
            </dt>

            <dd className="field-body">
              Parameters after local training
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.PYUFedAvgG"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g"} fullname={"PYUFedAvgG"} description={"ActorProxy(PYUFedAvgG) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedAvgG" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_g.PYUFedAvgG">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_avg\_g.</Outline.Prefix><Outline.Name>PYUFedAvgG</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedAvgG)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(gradients, cur\_steps, ...)
          </td>

          <td>
            Accept ps model params, then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u"}

## secretflow\.ml.nn.fl.backend.torch.strategy.fed\_avg\_u module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [<code>FedAvgU</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.FedAvgU "secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.FedAvgU")(builder\_base\[, random\_seed])
      </td>

      <td>
        FedAvgU: An implementation of FedAvg, where the clients upload their model updates to the server for averaging and update their local models with the aggregated updates from the server in each federated round.
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedAvgU</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.PYUFedAvgU "secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.PYUFedAvgU")
      </td>

      <td>
        <code>ActorProxy(PYUFedAvgU)</code> 的别名
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.FedAvgU"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u"} fullname={"FedAvgU"} parameters={["builder_base", "random_seed"]} description={"\u57fa\u7c7b\uff1aBaseTorchModel"}>
  <Outline.Signature fullname="FedAvgU" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.FedAvgU">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_avg\_u.</Outline.Prefix><Outline.Name>FedAvgU</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">builder\_base</span><span>:</span><span>{" "}</span><span className="name">[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "（在 Python v3.11）")<span>\[</span><span>\[</span><span>]</span><span>,</span><span>{" "}</span>[TorchModel](secretflow.ml.ml.nn.mdx#secretflow.ml.nn.utils.TorchModel "secretflow.ml.nn.utils.TorchModel")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_seed</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "（在 Python v3.11）")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    基类：[<code>BaseTorchModel</code>](secretflow.ml.nn.fl.backend.ml.nn.fl.backend.torch.mdx#secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel "secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel")

    FedAvgU: An implementation of FedAvg, where the clients upload their model updates
    to the server for averaging and update their local models with the aggregated
    updates from the server in each federated round. This paradigm acts the same as
    FedAvgG when using the SGD optimizer, but may not for other optimizers (e.g., Adam).

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [<code>train\_step</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.FedAvgU.train_step "secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.FedAvgU.train_step")(updates, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params, then do local train
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.FedAvgU.train_step"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u"} fullname={"FedAvgU.train_step"} parameters={["updates", "cur_steps", "train_steps", "kwargs"]} description={"Accept ps model params, then do local train"}>
      <Outline.Signature fullname="FedAvgU.train_step" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.FedAvgU.train_step">
        <Outline.Name>train\_step</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">updates</span><span>:</span><span>{" "}</span><span className="name">[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">cur\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">train\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span>\*\*</span><span className="name">kwargs</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[Tuple](https://docs.python.org/3/library/typing.html#typing.Tuple "（在 Python v3.11）")<span>\[</span>[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")<span>,</span><span>{" "}</span>[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>]</span></Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Accept ps model params, then do local train

        <FieldList>
          <dl>
            <dt className="field-name">
              参数
            </dt>

            <dd className="field-body">
              - <strong>updates</strong> – global updates from params server
              - <strong>cur\_steps</strong> – current train step
              - <strong>train\_steps</strong> – local training steps
              - <strong>kwargs</strong> – strategy-specific parameters
            </dd>

            <dt className="field-name">
              返回
            </dt>

            <dd className="field-body">
              Parameters after local training
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.PYUFedAvgU"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u"} fullname={"PYUFedAvgU"} description={"ActorProxy(PYUFedAvgU) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedAvgU" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_u.PYUFedAvgU">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_avg\_u.</Outline.Prefix><Outline.Name>PYUFedAvgU</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedAvgU)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(updates, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params, then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w"}

## secretflow\.ml.nn.fl.backend.torch.strategy.fed\_avg\_w module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [<code>FedAvgW</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.FedAvgW "secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.FedAvgW")(builder\_base\[, random\_seed])
      </td>

      <td>
        FedAvgW: A naive implementation of FedAvg, where the clients upload their trained model weights to the server for averaging and update their local models via the aggregated weights from the server in each federated round.
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedAvgW</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.PYUFedAvgW "secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.PYUFedAvgW")
      </td>

      <td>
        <code>ActorProxy(PYUFedAvgW)</code> 的别名
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.FedAvgW"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w"} fullname={"FedAvgW"} parameters={["builder_base", "random_seed"]} description={"\u57fa\u7c7b\uff1aBaseTorchModel"}>
  <Outline.Signature fullname="FedAvgW" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.FedAvgW">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_avg\_w.</Outline.Prefix><Outline.Name>FedAvgW</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">builder\_base</span><span>:</span><span>{" "}</span><span className="name">[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "（在 Python v3.11）")<span>\[</span><span>\[</span><span>]</span><span>,</span><span>{" "}</span>[TorchModel](secretflow.ml.ml.nn.mdx#secretflow.ml.nn.utils.TorchModel "secretflow.ml.nn.utils.TorchModel")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_seed</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "（在 Python v3.11）")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    基类：[<code>BaseTorchModel</code>](secretflow.ml.nn.fl.backend.ml.nn.fl.backend.torch.mdx#secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel "secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel")

    FedAvgW: A naive implementation of FedAvg, where the clients upload their trained model
    weights to the server for averaging and update their local models via the aggregated weights
    from the server in each federated round.

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [<code>train\_step</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.FedAvgW.train_step "secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.FedAvgW.train_step")(weights, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params, then do local train
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.FedAvgW.train_step"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w"} fullname={"FedAvgW.train_step"} parameters={["weights", "cur_steps", "train_steps", "kwargs"]} description={"Accept ps model params, then do local train"}>
      <Outline.Signature fullname="FedAvgW.train_step" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.FedAvgW.train_step">
        <Outline.Name>train\_step</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">weights</span><span>:</span><span>{" "}</span><span className="name">[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">cur\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">train\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span>\*\*</span><span className="name">kwargs</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[Tuple](https://docs.python.org/3/library/typing.html#typing.Tuple "（在 Python v3.11）")<span>\[</span>[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")<span>,</span><span>{" "}</span>[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>]</span></Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Accept ps model params, then do local train

        <FieldList>
          <dl>
            <dt className="field-name">
              参数
            </dt>

            <dd className="field-body">
              - <strong>weights</strong> – global weight from params server
              - <strong>cur\_steps</strong> – current train step
              - <strong>train\_steps</strong> – local training steps
              - <strong>kwargs</strong> – strategy-specific parameters
            </dd>

            <dt className="field-name">
              返回
            </dt>

            <dd className="field-body">
              Parameters after local training
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.PYUFedAvgW"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w"} fullname={"PYUFedAvgW"} description={"ActorProxy(PYUFedAvgW) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedAvgW" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_avg_w.PYUFedAvgW">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_avg\_w.</Outline.Prefix><Outline.Name>PYUFedAvgW</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedAvgW)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(weights, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params, then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.ml.nn.fl.backend.torch.strategy.fed_prox"}

## secretflow\.ml.nn.fl.backend.torch.strategy.fed\_prox module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [<code>FedProx</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx "secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx")(builder\_base\[, random\_seed])
      </td>

      <td>
        FedfProx: An FL optimization strategy that addresses the challenge of heterogeneity on data (non-IID) and devices, which adds a proximal term to the local objective function of each client, for better convergence.
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedProx</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.PYUFedProx "secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.PYUFedProx")
      </td>

      <td>
        <code>ActorProxy(PYUFedProx)</code> 的别名
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_prox"} fullname={"FedProx"} parameters={["builder_base", "random_seed"]} description={"\u57fa\u7c7b\uff1aBaseTorchModel"}>
  <Outline.Signature fullname="FedProx" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_prox.</Outline.Prefix><Outline.Name>FedProx</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">builder\_base</span><span>:</span><span>{" "}</span><span className="name">[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "（在 Python v3.11）")<span>\[</span><span>\[</span><span>]</span><span>,</span><span>{" "}</span>[TorchModel](secretflow.ml.ml.nn.mdx#secretflow.ml.nn.utils.TorchModel "secretflow.ml.nn.utils.TorchModel")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_seed</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "（在 Python v3.11）")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    基类：[<code>BaseTorchModel</code>](secretflow.ml.nn.fl.backend.ml.nn.fl.backend.torch.mdx#secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel "secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel")

    FedfProx: An FL optimization strategy that addresses the challenge of heterogeneity on data
    (non-IID) and devices, which adds a proximal term to the local objective function of each
    client, for better convergence. In the feature, this strategy will allow every client to
    train locally with a different Gamma-inexactness, for higher training efficiency.

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [<code>w\_norm</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx.w_norm "secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx.w_norm")(w1, w2)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            [<code>train\_step</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx.train_step "secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx.train_step")(weights, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params,then do local train
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx.w_norm"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_prox"} fullname={"FedProx.w_norm"} parameters={["w1", "w2"]} description={"\u57fa\u7c7b\uff1aBaseTorchModel"}>
      <Outline.Signature fullname="FedProx.w_norm" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx.w_norm">
        <Outline.Name>w\_norm</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">w1</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">w2</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "（在 Python v3.11）")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content />
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx.train_step"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_prox"} fullname={"FedProx.train_step"} parameters={["weights", "cur_steps", "train_steps", "kwargs"]} description={"Accept ps model params,then do local train"}>
      <Outline.Signature fullname="FedProx.train_step" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.FedProx.train_step">
        <Outline.Name>train\_step</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">weights</span><span>:</span><span>{" "}</span><span className="name">[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">cur\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">train\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span>\*\*</span><span className="name">kwargs</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[Tuple](https://docs.python.org/3/library/typing.html#typing.Tuple "（在 Python v3.11）")<span>\[</span>[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")<span>,</span><span>{" "}</span>[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>]</span></Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Accept ps model params,then do local train

        <FieldList>
          <dl>
            <dt className="field-name">
              参数
            </dt>

            <dd className="field-body">
              - <strong>weights</strong> – global weight from params server
              - <strong>cur\_steps</strong> – current train step
              - <strong>train\_steps</strong> – local training steps
              - <strong>kwargs</strong> – strategy-specific parameters
                mu: hyper-parameter for the proximal term, default is 0.0
            </dd>

            <dt className="field-name">
              返回
            </dt>

            <dd className="field-body">
              Parameters after local training
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.PYUFedProx"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_prox"} fullname={"PYUFedProx"} description={"ActorProxy(PYUFedProx) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedProx" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_prox.PYUFedProx">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_prox.</Outline.Prefix><Outline.Name>PYUFedProx</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedProx)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(weights, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params,then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>w\_norm</code>(w1, w2)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.ml.nn.fl.backend.torch.strategy.fed_scr"}

## secretflow\.ml.nn.fl.backend.torch.strategy.fed\_scr module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [<code>FedSCR</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR "secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR")(builder\_base, random\_seed)
      </td>

      <td>
        FedSCR: A structure-wise aggregation method to identify and remove redundant updates, it aggregates parameter updates over a particular structure (e.g., filters and channels).
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedSCR</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.PYUFedSCR "secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.PYUFedSCR")
      </td>

      <td>
        <code>ActorProxy(PYUFedSCR)</code> 的别名
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_scr"} fullname={"FedSCR"} parameters={["builder_base", "random_seed"]} description={"\u57fa\u7c7b\uff1aBaseTorchModel"}>
  <Outline.Signature fullname="FedSCR" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_scr.</Outline.Prefix><Outline.Name>FedSCR</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">builder\_base</span><span>:</span><span>{" "}</span><span className="name">[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "（在 Python v3.11）")<span>\[</span><span>\[</span><span>]</span><span>,</span><span>{" "}</span>[TorchModel](secretflow.ml.ml.nn.mdx#secretflow.ml.nn.utils.TorchModel "secretflow.ml.nn.utils.TorchModel")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_seed</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    基类：[<code>BaseTorchModel</code>](secretflow.ml.nn.fl.backend.ml.nn.fl.backend.torch.mdx#secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel "secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel")

    FedSCR: A structure-wise aggregation method to identify and remove redundant updates,
    it aggregates parameter updates over a particular structure (e.g., filters and channels).
    If the sum of the absolute updates of a model structure is lower than a given threshold,
    FedSCR will treat the updates in this structure as less important and filter them out.

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [<code>\_\_init\_\_</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR.__init__ "secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR.__init__")(builder\_base, random\_seed)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            [<code>train\_step</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR.train_step "secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR.train_step")(updates, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params,then do local train
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR.__init__"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_scr"} fullname={"FedSCR.__init__"} parameters={["builder_base", "random_seed"]} description={"\u57fa\u7c7b\uff1aBaseTorchModel"}>
      <Outline.Signature fullname="FedSCR.__init__" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR.__init__">
        <Outline.Name>\_\_init\_\_</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">builder\_base</span><span>:</span><span>{" "}</span><span className="name">[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "（在 Python v3.11）")<span>\[</span><span>\[</span><span>]</span><span>,</span><span>{" "}</span>[TorchModel](secretflow.ml.ml.nn.mdx#secretflow.ml.nn.utils.TorchModel "secretflow.ml.nn.utils.TorchModel")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_seed</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content />
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR.train_step"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_scr"} fullname={"FedSCR.train_step"} parameters={["updates", "cur_steps", "train_steps", "kwargs"]} description={"Accept ps model params,then do local train"}>
      <Outline.Signature fullname="FedSCR.train_step" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.FedSCR.train_step">
        <Outline.Name>train\_step</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">updates</span><span>:</span><span>{" "}</span><span className="name">[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">cur\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">train\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span>\*\*</span><span className="name">kwargs</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[Tuple](https://docs.python.org/3/library/typing.html#typing.Tuple "（在 Python v3.11）")<span>\[</span>[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")<span>,</span><span>{" "}</span>[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>]</span></Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Accept ps model params,then do local train

        <FieldList>
          <dl>
            <dt className="field-name">
              参数
            </dt>

            <dd className="field-body">
              - <strong>updates</strong> – global updates from params server
              - <strong>cur\_steps</strong> – current train step
              - <strong>train\_steps</strong> – local training steps
              - <strong>kwargs</strong> – strategy-specific parameters
                threshold: user-defined threshold, controlling the selectivity of weight updates, filtering insignificant updates
            </dd>

            <dt className="field-name">
              返回
            </dt>

            <dd className="field-body">
              Parameters after local training
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.PYUFedSCR"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_scr"} fullname={"PYUFedSCR"} description={"ActorProxy(PYUFedSCR) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedSCR" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_scr.PYUFedSCR">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_scr.</Outline.Prefix><Outline.Name>PYUFedSCR</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedSCR)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(updates, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params,then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.ml.nn.fl.backend.torch.strategy.fed_stc"}

## secretflow\.ml.nn.fl.backend.torch.strategy.fed\_stc module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [<code>FedSTC</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC "secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC")(builder\_base, random\_seed)
      </td>

      <td>
        FedSTC: Sparse Ternary Compression (STC), a new compression framework that is speciﬁcally designed to meet the requirements of the Federated Learning environment.
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedSTC</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.PYUFedSTC "secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.PYUFedSTC")
      </td>

      <td>
        <code>ActorProxy(PYUFedSTC)</code> 的别名
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_stc"} fullname={"FedSTC"} parameters={["builder_base", "random_seed"]} description={"\u57fa\u7c7b\uff1aBaseTorchModel"}>
  <Outline.Signature fullname="FedSTC" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_stc.</Outline.Prefix><Outline.Name>FedSTC</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">builder\_base</span><span>:</span><span>{" "}</span><span className="name">[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "（在 Python v3.11）")<span>\[</span><span>\[</span><span>]</span><span>,</span><span>{" "}</span>[TorchModel](secretflow.ml.ml.nn.mdx#secretflow.ml.nn.utils.TorchModel "secretflow.ml.nn.utils.TorchModel")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_seed</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    基类：[<code>BaseTorchModel</code>](secretflow.ml.nn.fl.backend.ml.nn.fl.backend.torch.mdx#secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel "secretflow.ml.nn.fl.backend.torch.fl_base.BaseTorchModel")

    FedSTC: Sparse Ternary Compression (STC), a new compression framework that is speciﬁcally
    designed to meet the requirements of the Federated Learning environment. STC applies both
    sparsity and binarization in both upstream (client –> server) and downstream (server –>
    client) communication.

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [<code>\_\_init\_\_</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC.__init__ "secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC.__init__")(builder\_base, random\_seed)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            [<code>train\_step</code>](#secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC.train_step "secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC.train_step")(updates, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params,then do local train
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC.__init__"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_stc"} fullname={"FedSTC.__init__"} parameters={["builder_base", "random_seed"]} description={"\u57fa\u7c7b\uff1aBaseTorchModel"}>
      <Outline.Signature fullname="FedSTC.__init__" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC.__init__">
        <Outline.Name>\_\_init\_\_</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">builder\_base</span><span>:</span><span>{" "}</span><span className="name">[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "（在 Python v3.11）")<span>\[</span><span>\[</span><span>]</span><span>,</span><span>{" "}</span>[TorchModel](secretflow.ml.ml.nn.mdx#secretflow.ml.nn.utils.TorchModel "secretflow.ml.nn.utils.TorchModel")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_seed</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content />
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC.train_step"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_stc"} fullname={"FedSTC.train_step"} parameters={["updates", "cur_steps", "train_steps", "kwargs"]} description={"Accept ps model params,then do local train"}>
      <Outline.Signature fullname="FedSTC.train_step" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.FedSTC.train_step">
        <Outline.Name>train\_step</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">updates</span><span>:</span><span>{" "}</span><span className="name">[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">cur\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span className="name">train\_steps</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")</span></Outline.Parameter>, <Outline.Parameter><span>\*\*</span><span className="name">kwargs</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[Tuple](https://docs.python.org/3/library/typing.html#typing.Tuple "（在 Python v3.11）")<span>\[</span>[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "（在 NumPy v1.25）")<span>,</span><span>{" "}</span>[int](https://docs.python.org/3/library/functions.html#int "（在 Python v3.11）")<span>]</span></Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Accept ps model params,then do local train

        <FieldList>
          <dl>
            <dt className="field-name">
              参数
            </dt>

            <dd className="field-body">
              - <strong>updates</strong> – global updates from params server
              - <strong>cur\_steps</strong> – current train step
              - <strong>train\_steps</strong> – local training steps
              - <strong>kwargs</strong> – strategy-specific parameters
                sparsity: SparsityParameters,the ratio of masked elements, default is 0.0
            </dd>

            <dt className="field-name">
              返回
            </dt>

            <dd className="field-body">
              Parameters after local training
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.PYUFedSTC"} module={"secretflow.ml.nn.fl.backend.torch.strategy.fed_stc"} fullname={"PYUFedSTC"} description={"ActorProxy(PYUFedSTC) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedSTC" id="secretflow.ml.nn.fl.backend.torch.strategy.fed_stc.PYUFedSTC">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.fed\_stc.</Outline.Prefix><Outline.Name>PYUFedSTC</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedSTC)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(updates, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params,then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.ml.nn.fl.backend.torch.strategy"}

## Module contents

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [<code>PYUFedAvgW</code>](#secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgW "secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgW")
      </td>

      <td>
        <code>ActorProxy(PYUFedAvgW)</code> 的别名
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedAvgG</code>](#secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgG "secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgG")
      </td>

      <td>
        <code>ActorProxy(PYUFedAvgG)</code> 的别名
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedAvgU</code>](#secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgU "secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgU")
      </td>

      <td>
        <code>ActorProxy(PYUFedAvgU)</code> 的别名
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedProx</code>](#secretflow.ml.nn.fl.backend.torch.strategy.PYUFedProx "secretflow.ml.nn.fl.backend.torch.strategy.PYUFedProx")
      </td>

      <td>
        <code>ActorProxy(PYUFedProx)</code> 的别名
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedSCR</code>](#secretflow.ml.nn.fl.backend.torch.strategy.PYUFedSCR "secretflow.ml.nn.fl.backend.torch.strategy.PYUFedSCR")
      </td>

      <td>
        <code>ActorProxy(PYUFedSCR)</code> 的别名
      </td>
    </tr>

    <tr>
      <td>
        [<code>PYUFedSTC</code>](#secretflow.ml.nn.fl.backend.torch.strategy.PYUFedSTC "secretflow.ml.nn.fl.backend.torch.strategy.PYUFedSTC")
      </td>

      <td>
        <code>ActorProxy(PYUFedSTC)</code> 的别名
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgW"} module={"secretflow.ml.nn.fl.backend.torch.strategy"} fullname={"PYUFedAvgW"} description={"ActorProxy(PYUFedAvgW) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedAvgW" id="secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgW">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.</Outline.Prefix><Outline.Name>PYUFedAvgW</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedAvgW)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(weights, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params, then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgG"} module={"secretflow.ml.nn.fl.backend.torch.strategy"} fullname={"PYUFedAvgG"} description={"ActorProxy(PYUFedAvgG) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedAvgG" id="secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgG">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.</Outline.Prefix><Outline.Name>PYUFedAvgG</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedAvgG)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(gradients, cur\_steps, ...)
          </td>

          <td>
            Accept ps model params, then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgU"} module={"secretflow.ml.nn.fl.backend.torch.strategy"} fullname={"PYUFedAvgU"} description={"ActorProxy(PYUFedAvgU) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedAvgU" id="secretflow.ml.nn.fl.backend.torch.strategy.PYUFedAvgU">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.</Outline.Prefix><Outline.Name>PYUFedAvgU</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedAvgU)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(updates, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params, then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.PYUFedProx"} module={"secretflow.ml.nn.fl.backend.torch.strategy"} fullname={"PYUFedProx"} description={"ActorProxy(PYUFedProx) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedProx" id="secretflow.ml.nn.fl.backend.torch.strategy.PYUFedProx">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.</Outline.Prefix><Outline.Name>PYUFedProx</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedProx)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(weights, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params,then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>w\_norm</code>(w1, w2)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.PYUFedSCR"} module={"secretflow.ml.nn.fl.backend.torch.strategy"} fullname={"PYUFedSCR"} description={"ActorProxy(PYUFedSCR) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedSCR" id="secretflow.ml.nn.fl.backend.torch.strategy.PYUFedSCR">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.</Outline.Prefix><Outline.Name>PYUFedSCR</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedSCR)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(updates, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params,then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="attribute" target={"secretflow.ml.nn.fl.backend.torch.strategy.PYUFedSTC"} module={"secretflow.ml.nn.fl.backend.torch.strategy"} fullname={"PYUFedSTC"} description={"ActorProxy(PYUFedSTC) \u7684\u522b\u540d\nMethods:"}>
  <Outline.Signature fullname="PYUFedSTC" id="secretflow.ml.nn.fl.backend.torch.strategy.PYUFedSTC">
    <Outline.Prefix>secretflow\.ml.nn.fl.backend.torch.strategy.</Outline.Prefix><Outline.Name>PYUFedSTC</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    <code>ActorProxy(PYUFedSTC)</code> 的别名
    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            <code>\_\_init\_\_</code>(\*args, \*\*kwargs)
          </td>

          <td>
            Abstraction device object base class.
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset</code>(x\[, y, s\_w, sampling\_rate, ...])
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_builder</code>(dataset\_builder, x)
          </td>

          <td>
            build tf.data.Dataset
          </td>
        </tr>

        <tr>
          <td>
            <code>build\_dataset\_from\_csv</code>(csv\_file\_path, label)
          </td>

          <td>
            build torch.dataloader
          </td>
        </tr>

        <tr>
          <td>
            <code>evaluate</code>(\[evaluate\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_rows\_count</code>(filename)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_stop\_training</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>get\_weights</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>init\_training</code>(callbacks\[, epochs, steps, ...])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>load\_model</code>(model\_path)
          </td>

          <td>
            load model from state dict, model structure must be defined before load
          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_begin</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_epoch\_end</code>(epoch)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_begin</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>on\_train\_end</code>()
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>predict</code>(\[predict\_steps])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>save\_model</code>(model\_path)
          </td>

          <td>
            For compatibility reasons it is recommended to instead save only its state dict Ref\:https\://pytorch.org/docs/master/notes/serialization.html#id5
          </td>
        </tr>

        <tr>
          <td>
            <code>set\_validation\_metrics</code>(global\_metrics)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>set\_weights</code>(weights)
          </td>

          <td>
            set weights of client model
          </td>
        </tr>

        <tr>
          <td>
            <code>train\_step</code>(updates, cur\_steps, train\_steps, ...)
          </td>

          <td>
            Accept ps model params,then do local train
          </td>
        </tr>

        <tr>
          <td>
            <code>transform\_metrics</code>(logs\[, stage])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            <code>wrap\_local\_metrics</code>()
          </td>

          <td>

          </td>
        </tr>
      </tbody>
    </table>
  </Outline.Content>
</Outline>
