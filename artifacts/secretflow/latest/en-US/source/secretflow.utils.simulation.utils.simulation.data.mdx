:target{#secretflow-utils-simulation-data-package}

# secretflow\.utils.simulation.data package

:target{#submodules}

## Submodules

:target{id="module-secretflow.utils.simulation.data.dataframe"}

## secretflow\.utils.simulation.data.dataframe module

<strong>Functions:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [`create_df`](#secretflow.utils.simulation.data.dataframe.create_df "secretflow.utils.simulation.data.dataframe.create_df")(source, parts\[, axis, shuffle, ...])
      </td>

      <td>
        Create a federated dataframe from a single data source. TODO: support other backends. \:param source: the dataset source, shall be a file path or pandas.DataFrame or                callable (shall returns a pandas.DataFrame). \:param parts: the data partitions. The dataset will be distributed as evenly               as possible to each PYU if parts is a array of PYUs. If parts is a               dict of pyu with value, the value shall be one of the followings:               1. a float               2. an interval in tuple closed on the left-side and open on the right-side. \:param axis: optional, the value is 0 or 1. 0 means split by row returning a              horizontal partitioning federated DataFrame. 1 means split by              column returning a vertical partitioning federated DataFrame. \:param shuffle: optional, if suffule the dataset before split. \:param random\_state: optional, the random state for shuffle. \:param aggregator: optional, shall be provided only when axis is 0. For details,                    please refer to <cite>secretflow\.data.horizontal.HDataFrame</cite>. \:param comparator: optional, shall be provided only when axis is 0. For details,                    please refer to <cite>secretflow\.data.horizontal.HDataFrame</cite>.
      </td>
    </tr>

    <tr>
      <td>
        [`create_hdf`](#secretflow.utils.simulation.data.dataframe.create_hdf "secretflow.utils.simulation.data.dataframe.create_hdf")(source, parts\[, shuffle, ...])
      </td>

      <td>
        Create a HDataFrame from a single dataset source.
      </td>
    </tr>

    <tr>
      <td>
        [`create_vdf`](#secretflow.utils.simulation.data.dataframe.create_vdf "secretflow.utils.simulation.data.dataframe.create_vdf")(source, parts\[, shuffle])
      </td>

      <td>
        Create a VDataFrame from a single dataset source.
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="function" target={"secretflow.utils.simulation.data.dataframe.create_df"} module={"secretflow.utils.simulation.data.dataframe"} fullname={"create_df"} parameters={["source", "parts", "axis", "shuffle", "random_state", "aggregator", "comparator"]} description={"Create a federated dataframe from a single data source.\nTODO: support other backends.\n:param source: the dataset source, shall be a file path or pandas.DataFrame or"}>
  <Outline.Signature fullname="create_df" id="secretflow.utils.simulation.data.dataframe.create_df">
    <Outline.Prefix>secretflow\.utils.simulation.data.dataframe.</Outline.Prefix><Outline.Name>create\_df</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">source</span><span>:</span><span>{" "}</span><span className="name">[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[DataFrame](https://pandas.pydata.org/pandas-docs/dev/reference/api/pandas.DataFrame.html#pandas.DataFrame "(in pandas v2.2.0dev0+286.g61d2056e42)")<span>{" "}</span><span>|</span><span>{" "}</span>[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "(in Python v3.11)")</span></Outline.Parameter>, <Outline.Parameter><span className="name">parts</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.11)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>]</span><span>{" "}</span><span>|</span><span>{" "}</span>[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "(in Python v3.11)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>,</span><span>{" "}</span>[float](https://docs.python.org/3/library/functions.html#float "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.11)")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>0</span></Outline.Parameter>, <Outline.Parameter><span className="name">shuffle</span><span>:</span><span>{" "}</span><span className="name">[bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>False</span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_state</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">aggregator</span><span>:</span><span>{" "}</span><span className="name">[Aggregator](secretflow.security.security.aggregation.mdx#secretflow.security.aggregation.aggregator.Aggregator "secretflow.security.aggregation.aggregator.Aggregator")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">comparator</span><span>:</span><span>{" "}</span><span className="name">[Comparator](secretflow.security.security.compare.mdx#secretflow.security.compare.comparator.Comparator "secretflow.security.compare.comparator.Comparator")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[HDataFrame](secretflow.data.data.horizontal.mdx#secretflow.data.horizontal.dataframe.HDataFrame "secretflow.data.horizontal.dataframe.HDataFrame")<span>{" "}</span><span>|</span><span>{" "}</span>[VDataFrame](secretflow.data.data.vertical.mdx#secretflow.data.vertical.dataframe.VDataFrame "secretflow.data.vertical.dataframe.VDataFrame")</Outline.ReturnType>
  </Outline.Signature>

  <Outline.Content>
    Create a federated dataframe from a single data source.
    TODO: support other backends.
    \:param source: the dataset source, shall be a file path or pandas.DataFrame or

    > callable (shall returns a pandas.DataFrame).

    <FieldList>
      <dl>
        <dt className="field-name">
          Parameters
        </dt>

        <dd className="field-body">
          - <Outline.ParameterTarget>parts</Outline.ParameterTarget> – the data partitions. The dataset will be distributed as evenly
            as possible to each PYU if parts is a array of PYUs. If parts is a
            dict of pyu with value, the value shall be one of the followings:
            1\. a float
            2\. an interval in tuple closed on the left-side and open on the right-side.
          - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional, the value is 0 or 1. 0 means split by row returning a
            horizontal partitioning federated DataFrame. 1 means split by
            column returning a vertical partitioning federated DataFrame.
          - <Outline.ParameterTarget>shuffle</Outline.ParameterTarget> – optional, if suffule the dataset before split.
          - <Outline.ParameterTarget>random\_state</Outline.ParameterTarget> – optional, the random state for shuffle.
          - <Outline.ParameterTarget>aggregator</Outline.ParameterTarget> – optional, shall be provided only when axis is 0. For details,
            please refer to <cite>secretflow\.data.horizontal.HDataFrame</cite>.
          - <Outline.ParameterTarget>comparator</Outline.ParameterTarget> – optional, shall be provided only when axis is 0. For details,
            please refer to <cite>secretflow\.data.horizontal.HDataFrame</cite>.
        </dd>

        <dt className="field-name">
          Returns
        </dt>

        <dd className="field-body">
          return a HDataFrame if axis is 0 else
          VDataFrame.
        </dd>

        <dt className="field-name">
          Return type
        </dt>

        <dd className="field-body">
          Union\[[HDataFrame](secretflow.data.data.horizontal.mdx#secretflow.data.horizontal.dataframe.HDataFrame "secretflow.data.horizontal.dataframe.HDataFrame"), [VDataFrame](secretflow.data.data.vertical.mdx#secretflow.data.vertical.dataframe.VDataFrame "secretflow.data.vertical.dataframe.VDataFrame")]
        </dd>
      </dl>
    </FieldList>

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> df = pd.DataFrame({'f1': [1, 2, 3, 4], 'f3': [11, 12, 13, 14]})
    ```

    ```python
    >>> # Create a HDataFrame evenly.
    >>> hdf = create_df(df, [alice, bob], axis=0)
    ```

    ```python
    >>> # Create a VDataFrame with a given percentage.
    >>> vdf = create_df(df, {alice: 0.3, bob: 0.7}, axis=1)
    ```

    ```python
    >>> # Create a HDataFrame with a given index.
    >>> hdf = create_df(df, {alice: (0, 1), bob: (1, 4)})
    ```
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="function" target={"secretflow.utils.simulation.data.dataframe.create_hdf"} module={"secretflow.utils.simulation.data.dataframe"} fullname={"create_hdf"} parameters={["source", "parts", "shuffle", "aggregator", "comparator"]} description={"Create a HDataFrame from a single dataset source."}>
  <Outline.Signature fullname="create_hdf" id="secretflow.utils.simulation.data.dataframe.create_hdf">
    <Outline.Prefix>secretflow\.utils.simulation.data.dataframe.</Outline.Prefix><Outline.Name>create\_hdf</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">source</span><span>:</span><span>{" "}</span><span className="name">[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[DataFrame](https://pandas.pydata.org/pandas-docs/dev/reference/api/pandas.DataFrame.html#pandas.DataFrame "(in pandas v2.2.0dev0+286.g61d2056e42)")<span>{" "}</span><span>|</span><span>{" "}</span>[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "(in Python v3.11)")</span></Outline.Parameter>, <Outline.Parameter><span className="name">parts</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.11)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>]</span><span>{" "}</span><span>|</span><span>{" "}</span>[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "(in Python v3.11)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>,</span><span>{" "}</span>[float](https://docs.python.org/3/library/functions.html#float "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.11)")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">shuffle</span><span>:</span><span>{" "}</span><span className="name">[bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>False</span></Outline.Parameter>, <Outline.Parameter><span className="name">aggregator</span><span>:</span><span>{" "}</span><span className="name">[Aggregator](secretflow.security.security.aggregation.mdx#secretflow.security.aggregation.aggregator.Aggregator "secretflow.security.aggregation.aggregator.Aggregator")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">comparator</span><span>:</span><span>{" "}</span><span className="name">[Comparator](secretflow.security.security.compare.mdx#secretflow.security.compare.comparator.Comparator "secretflow.security.compare.comparator.Comparator")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[HDataFrame](secretflow.data.data.horizontal.mdx#secretflow.data.horizontal.dataframe.HDataFrame "secretflow.data.horizontal.dataframe.HDataFrame")</Outline.ReturnType>
  </Outline.Signature>

  <Outline.Content>
    Create a HDataFrame from a single dataset source.

    Refer to [`create_df()`](#secretflow.utils.simulation.data.dataframe.create_df "secretflow.utils.simulation.data.dataframe.create_df") for full documentation.
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="function" target={"secretflow.utils.simulation.data.dataframe.create_vdf"} module={"secretflow.utils.simulation.data.dataframe"} fullname={"create_vdf"} parameters={["source", "parts", "shuffle"]} description={"Create a VDataFrame from a single dataset source."}>
  <Outline.Signature fullname="create_vdf" id="secretflow.utils.simulation.data.dataframe.create_vdf">
    <Outline.Prefix>secretflow\.utils.simulation.data.dataframe.</Outline.Prefix><Outline.Name>create\_vdf</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">source</span><span>:</span><span>{" "}</span><span className="name">[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[DataFrame](https://pandas.pydata.org/pandas-docs/dev/reference/api/pandas.DataFrame.html#pandas.DataFrame "(in pandas v2.2.0dev0+286.g61d2056e42)")<span>{" "}</span><span>|</span><span>{" "}</span>[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "(in Python v3.11)")</span></Outline.Parameter>, <Outline.Parameter><span className="name">parts</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.11)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>]</span><span>{" "}</span><span>|</span><span>{" "}</span>[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "(in Python v3.11)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>,</span><span>{" "}</span>[float](https://docs.python.org/3/library/functions.html#float "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.11)")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">shuffle</span><span>:</span><span>{" "}</span><span className="name">[bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>False</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[VDataFrame](secretflow.data.data.vertical.mdx#secretflow.data.vertical.dataframe.VDataFrame "secretflow.data.vertical.dataframe.VDataFrame")</Outline.ReturnType>
  </Outline.Signature>

  <Outline.Content>
    Create a VDataFrame from a single dataset source.

    Refer to [`create_df()`](#secretflow.utils.simulation.data.dataframe.create_df "secretflow.utils.simulation.data.dataframe.create_df") for full documentation.
  </Outline.Content>
</Outline>

:target{id="module-secretflow.utils.simulation.data.ndarray"}

## secretflow\.utils.simulation.data.ndarray module

<strong>Functions:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [`create_ndarray`](#secretflow.utils.simulation.data.ndarray.create_ndarray "secretflow.utils.simulation.data.ndarray.create_ndarray")(source, parts\[, axis, ...])
      </td>

      <td>
        Create a federated ndarray from a single data source.
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="function" target={"secretflow.utils.simulation.data.ndarray.create_ndarray"} module={"secretflow.utils.simulation.data.ndarray"} fullname={"create_ndarray"} parameters={["source", "parts", "axis", "shuffle", "random_state", "allow_pickle", "is_torch"]} description={"Create a federated ndarray from a single data source."}>
  <Outline.Signature fullname="create_ndarray" id="secretflow.utils.simulation.data.ndarray.create_ndarray">
    <Outline.Prefix>secretflow\.utils.simulation.data.ndarray.</Outline.Prefix><Outline.Name>create\_ndarray</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">source</span><span>:</span><span>{" "}</span><span className="name">[str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[ndarray](https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray "(in NumPy v1.26)")<span>{" "}</span><span>|</span><span>{" "}</span>[Callable](https://docs.python.org/3/library/typing.html#typing.Callable "(in Python v3.11)")</span></Outline.Parameter>, <Outline.Parameter><span className="name">parts</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.11)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>]</span><span>{" "}</span><span>|</span><span>{" "}</span>[Dict](https://docs.python.org/3/library/typing.html#typing.Dict "(in Python v3.11)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>,</span><span>{" "}</span>[float](https://docs.python.org/3/library/functions.html#float "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[tuple](https://docs.python.org/3/library/stdtypes.html#tuple "(in Python v3.11)")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>0</span></Outline.Parameter>, <Outline.Parameter><span className="name">shuffle</span><span>:</span><span>{" "}</span><span className="name">[bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>False</span></Outline.Parameter>, <Outline.Parameter><span className="name">random\_state</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.11)")<span>{" "}</span><span>|</span><span>{" "}</span>[None](https://docs.python.org/3/library/constants.html#None "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">allow\_pickle</span><span>:</span><span>{" "}</span><span className="name">[bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>False</span></Outline.Parameter>, <Outline.Parameter><span className="name">is\_torch</span><span>:</span><span>{" "}</span><span className="name">[bool](https://docs.python.org/3/library/functions.html#bool "(in Python v3.11)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>False</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[FedNdarray](secretflow.data.data.ndarray.mdx#secretflow.data.ndarray.ndarray.FedNdarray "secretflow.data.ndarray.ndarray.FedNdarray")</Outline.ReturnType>
  </Outline.Signature>

  <Outline.Content>
    Create a federated ndarray from a single data source.

    <FieldList>
      <dl>
        <dt className="field-name">
          Parameters
        </dt>

        <dd className="field-body">
          - <Outline.ParameterTarget>source</Outline.ParameterTarget> – the dataset source, shall be a file path or numpy.ndarray or
            callable (shall returns a pandas.DataFrame).
          - <Outline.ParameterTarget>parts</Outline.ParameterTarget> – the data partitions. The dataset will be distributed as evenly
            as possible to each PYU if parts is a array of PYUs. If parts is a
            dict \{PYU: value}, the value shall be one of the followings.
            1\) a float
            2\) an interval in tuple closed on the left-side and open on the right-side.
          - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional, the value is 0 or 1. 0 means split by row returning a
            horizontal partitioning federated DataFrame. 1 means split by
            column returning a vertical partitioning federated DataFrame.
          - <Outline.ParameterTarget>shuffle</Outline.ParameterTarget> – optional, if suffule the dataset before split.
          - <Outline.ParameterTarget>random\_state</Outline.ParameterTarget> – optional, the random state for shuffle.
          - <Outline.ParameterTarget>allow\_pickle</Outline.ParameterTarget> – the np.load argument when source is a  file path.
        </dd>

        <dt className="field-name">
          Returns
        </dt>

        <dd className="field-body">
          a FedNdrray.
        </dd>
      </dl>
    </FieldList>

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> arr = np.array([[1, 2, 3, 4], [11, 12, 13, 14]])
    ```

    ```python
    >>> # Create a horizontal partitioned FedNdarray evenly.
    >>> h_arr = created_ndarray(arr, [alice, bob], axis=0)
    ```

    ```python
    >>> # Create a vertical partitioned FedNdarray.
    >>> v_arr = created_ndarray(arr, {alice: 0.3, bob: 0.7}, axis=1)
    ```

    ```python
    >>> # Create a horizontal partitioned FedNdarray evenly.
    >>> h_arr = created_ndarray(arr, {alice: (0, 1), bob: (1, 4)})
    ```
  </Outline.Content>
</Outline>

:target{id="module-secretflow.utils.simulation.data"}

## Module contents
