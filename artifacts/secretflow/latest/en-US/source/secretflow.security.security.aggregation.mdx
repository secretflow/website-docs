:target{#secretflow-security-aggregation-package}

# secretflow\.security.aggregation package

:target{#subpackages}

## Subpackages

<TableOfContents>


  - [secretflow.security.aggregation.experiment package](secretflow.security.aggregation.security.aggregation.experiment.mdx)
    - [Submodules](secretflow.security.aggregation.security.aggregation.experiment.mdx#submodules)
    - [secretflow.security.aggregation.experiment.mask\_heu\_aggregator module](secretflow.security.aggregation.security.aggregation.experiment.mdx#module-secretflow.security.aggregation.experiment.mask_heu_aggregator)
    - [Module contents](secretflow.security.aggregation.security.aggregation.experiment.mdx#module-secretflow.security.aggregation.experiment)
</TableOfContents>

:target{#submodules}

## Submodules

:target{id="module-secretflow.security.aggregation.aggregator"}

## secretflow\.security.aggregation.aggregator module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [`Aggregator`](#secretflow.security.aggregation.aggregator.Aggregator "secretflow.security.aggregation.aggregator.Aggregator")()
      </td>

      <td>
        The abstract aggregator.
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.aggregator.Aggregator"} module={"secretflow.security.aggregation.aggregator"} fullname={"Aggregator"} description={"Bases: ABC"}>
  <Outline.Signature fullname="Aggregator" id="secretflow.security.aggregation.aggregator.Aggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.aggregator.</Outline.Prefix><Outline.Name>Aggregator</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`ABC`](https://docs.python.org/3/library/abc.html#abc.ABC "(in Python v3.12)")

    The abstract aggregator.

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.aggregator.Aggregator.sum "secretflow.security.aggregation.aggregator.Aggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.aggregator.Aggregator.average "secretflow.security.aggregation.aggregator.Aggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.aggregator.Aggregator.sum"} module={"secretflow.security.aggregation.aggregator"} fullname={"Aggregator.sum"} description={"Sum of array elements over a given axis."} parameters={["data", "axis"]}>
      <Outline.Signature fullname="Aggregator.sum" id="secretflow.security.aggregation.aggregator.Aggregator.sum">
        <Outline.Keyword>abstract<span>{" "}</span></Outline.Keyword><Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.aggregator.Aggregator.average"} module={"secretflow.security.aggregation.aggregator"} fullname={"Aggregator.average"} description={"Compute the weighted average along the specified axis."} parameters={["data", "axis", "weights"]}>
      <Outline.Signature fullname="Aggregator.average" id="secretflow.security.aggregation.aggregator.Aggregator.average">
        <Outline.Keyword>abstract<span>{" "}</span></Outline.Keyword><Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.security.aggregation.plain_aggregator"}

## secretflow\.security.aggregation.plain\_aggregator module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [`PlainAggregator`](#secretflow.security.aggregation.plain_aggregator.PlainAggregator "secretflow.security.aggregation.plain_aggregator.PlainAggregator")(device)
      </td>

      <td>
        Plaintext aggregator.
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.plain_aggregator.PlainAggregator"} module={"secretflow.security.aggregation.plain_aggregator"} fullname={"PlainAggregator"} parameters={["device"]} description={"Bases: Aggregator"}>
  <Outline.Signature fullname="PlainAggregator" id="secretflow.security.aggregation.plain_aggregator.PlainAggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.plain\_aggregator.</Outline.Prefix><Outline.Name>PlainAggregator</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`Aggregator`](#secretflow.security.aggregation.aggregator.Aggregator "secretflow.security.aggregation.aggregator.Aggregator")

    Plaintext aggregator.

    The computation will be performed in plaintext.

    <Container type="warning">
      PlainAggregator is for debugging purpose only.
      You should not use it in production.
    </Container>

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> # Alice and bob are both pyu instances.
    >>> aggregator = PlainAggregator(alice)
    >>> a = alice(lambda : np.random.rand(2, 5))()
    >>> b = bob(lambda : np.random.rand(2, 5))()
    >>> sum_a_b = aggregator.sum([a, b], axis=0)
    >>> # Get the result.
    >>> sf.reveal(sum_a_b)
    array([[0.5954927 , 0.9381409 , 0.99397117, 1.551537  , 0.32698634],
      [1.288345  , 1.1820003 , 1.1769378 , 0.7396539 , 1.215364  ]],
      dtype=float32)
    >>> average_a_b = aggregator.average([a, b], axis=0)
    >>> sf.reveal(average_a_b)
    array([[0.29774636, 0.46907046, 0.49698558, 0.7757685 , 0.16349317],
      [0.6441725 , 0.59100014, 0.5884689 , 0.36982694, 0.607682  ]],
      dtype=float32)
    ```

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`__init__`](#secretflow.security.aggregation.plain_aggregator.PlainAggregator.__init__ "secretflow.security.aggregation.plain_aggregator.PlainAggregator.__init__")(device)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.plain_aggregator.PlainAggregator.sum "secretflow.security.aggregation.plain_aggregator.PlainAggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.plain_aggregator.PlainAggregator.average "secretflow.security.aggregation.plain_aggregator.PlainAggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.plain_aggregator.PlainAggregator.__init__"} module={"secretflow.security.aggregation.plain_aggregator"} fullname={"PlainAggregator.__init__"} parameters={["device"]} description={"Bases: Aggregator"}>
      <Outline.Signature fullname="PlainAggregator.__init__" id="secretflow.security.aggregation.plain_aggregator.PlainAggregator.__init__">
        <Outline.Name>\_\_init\_\_</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content />
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.plain_aggregator.PlainAggregator.sum"} module={"secretflow.security.aggregation.plain_aggregator"} fullname={"PlainAggregator.sum"} parameters={["data", "axis"]} description={"Sum of array elements over a given axis."}>
      <Outline.Signature fullname="PlainAggregator.sum" id="secretflow.security.aggregation.plain_aggregator.PlainAggregator.sum">
        <Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[PYUObject](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYUObject "secretflow.device.device.pyu.PYUObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.mean()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the sum.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.plain_aggregator.PlainAggregator.average"} module={"secretflow.security.aggregation.plain_aggregator"} fullname={"PlainAggregator.average"} parameters={["data", "axis", "weights"]} description={"Compute the weighted average along the specified axis."}>
      <Outline.Signature fullname="PlainAggregator.average" id="secretflow.security.aggregation.plain_aggregator.PlainAggregator.average">
        <Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[PYUObject](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYUObject "secretflow.device.device.pyu.PYUObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.average()`.
              - <Outline.ParameterTarget>weights</Outline.ParameterTarget> – optional. Same as the weights argument of `numpy.average()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the weighted average.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.security.aggregation.secure_aggregator"}

## secretflow\.security.aggregation.secure\_aggregator module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [`SecureAggregator`](#secretflow.security.aggregation.secure_aggregator.SecureAggregator "secretflow.security.aggregation.secure_aggregator.SecureAggregator")(device, participants\[, ...])
      </td>

      <td>
        The secure aggregation implementation of <cite>Masking with One-Time Pads</cite>.
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.secure_aggregator.SecureAggregator"} module={"secretflow.security.aggregation.secure_aggregator"} fullname={"SecureAggregator"} parameters={["device", "participants", "fxp_bits"]} description={"Bases: Aggregator"}>
  <Outline.Signature fullname="SecureAggregator" id="secretflow.security.aggregation.secure_aggregator.SecureAggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.secure\_aggregator.</Outline.Prefix><Outline.Name>SecureAggregator</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter>, <Outline.Parameter><span className="name">participants</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">fxp\_bits</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.12)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>18</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`Aggregator`](#secretflow.security.aggregation.aggregator.Aggregator "secretflow.security.aggregation.aggregator.Aggregator")

    The secure aggregation implementation of <cite>Masking with One-Time Pads</cite>.

    <cite>Masking with One-Time Pads</cite> negotiates a secret for every two participants,
    then uses the secret to hide its input <cite>x</cite>, and each participant outputs.

    <Math>
      $$
      y_u = x_u + \sum _{u < v}S_{u,v} - \sum_{u>v}S_{u,v}\quad(mod\:R)


      $$
    </Math>

    the secrets are cancelled out after aggregation and then we can get the correct result.

    <Math>
      $$
      \sum y = \sum x


      $$
    </Math>

    For example, the participants Alice, Bob, and Carol each own <InlineMath>$x_1, x_2, x_3$</InlineMath>,
    negotiate the secret <InlineMath>$s_{a,b}, s_{a,c}, s_{b,c}$</InlineMath>, and then output:

    <Math>
      $$
      y_1 = x_1 + s_{a,b} + s_{a,c}


      $$
    </Math>

    <Math>
      $$
      y_2 = x_2 - s_{a,b} + s_{b,c}


      $$
    </Math>

    <Math>
      $$
      y_3 = x_3 - s_{a,c} - s_{b,c}


      $$
    </Math>

    then it is easy to get

    <Math>
      $$
      y_1 + y_2 + y_3 = x_1 + s_{a,b} + s_{a,c} + x_2 - s_{a,b} + s_{b,c} + x_3 - s_{a,c} - s_{b,c}
      = x_1 + x_2 + x_3


      $$
    </Math>

    <p className="sidebar-rubric">
      Notes
    </p>

    <cite>Masking with One-Time Pads</cite> is based on semi-honest assumptions
    and does not support client dropping. For more information, please refer to
    [Practical Secure Aggregation for Privacy-Preserving Machine Learning](https://eprint.iacr.org/2017/281.pdf)

    <Container type="warning">
      The SecureAggregator uses `numpy.random.PCG64()`. There are many
      discussions of whether PCG is a CSPRNG
      (e.g. [https://crypto.stackexchange.com/questions/77101/is-the-pcg-prng-a-csprng-or-why-not](https://crypto.stackexchange.com/questions/77101/is-the-pcg-prng-a-csprng-or-why-not)),
      we prefer a conservative strategy unless a further security analysis came
      up. Therefore we recommend users to use a standardized CSPRNG in industrial
      scenarios.
    </Container>

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> # Alice and bob are both pyu instances.
    >>> aggregator = SecureAggregator(alice, [alice, bob])
    >>> a = alice(lambda : np.random.rand(2, 5))()
    >>> b = bob(lambda : np.random.rand(2, 5))()
    >>> sum_a_b = aggregator.sum([a, b], axis=0)
    >>> # Get the result.
    >>> sf.reveal(sum_a_b)
    array([[0.5954927 , 0.9381409 , 0.99397117, 1.551537  , 0.3269863 ],
    [1.288345  , 1.1820003 , 1.1769378 , 0.7396539 , 1.215364  ]],
    dtype=float32)
    >>> average_a_b = aggregator.average([a, b], axis=0)
    >>> sf.reveal(average_a_b)
    array([[0.29774636, 0.46907043, 0.49698558, 0.7757685 , 0.16349316],
    [0.6441725 , 0.5910001 , 0.5884689 , 0.3698269 , 0.607682  ]],
    dtype=float32)
    ```

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`__init__`](#secretflow.security.aggregation.secure_aggregator.SecureAggregator.__init__ "secretflow.security.aggregation.secure_aggregator.SecureAggregator.__init__")(device, participants\[, fxp\_bits])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.secure_aggregator.SecureAggregator.sum "secretflow.security.aggregation.secure_aggregator.SecureAggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.secure_aggregator.SecureAggregator.average "secretflow.security.aggregation.secure_aggregator.SecureAggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.secure_aggregator.SecureAggregator.__init__"} module={"secretflow.security.aggregation.secure_aggregator"} fullname={"SecureAggregator.__init__"} parameters={["device", "participants", "fxp_bits"]} description={"Bases: Aggregator"}>
      <Outline.Signature fullname="SecureAggregator.__init__" id="secretflow.security.aggregation.secure_aggregator.SecureAggregator.__init__">
        <Outline.Name>\_\_init\_\_</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter>, <Outline.Parameter><span className="name">participants</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">fxp\_bits</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.12)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>18</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content />
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.secure_aggregator.SecureAggregator.sum"} module={"secretflow.security.aggregation.secure_aggregator"} fullname={"SecureAggregator.sum"} parameters={["data", "axis"]} description={"Sum of array elements over a given axis."}>
      <Outline.Signature fullname="SecureAggregator.sum" id="secretflow.security.aggregation.secure_aggregator.SecureAggregator.sum">
        <Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[PYUObject](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYUObject "secretflow.device.device.pyu.PYUObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.secure_aggregator.SecureAggregator.average"} module={"secretflow.security.aggregation.secure_aggregator"} fullname={"SecureAggregator.average"} parameters={["data", "axis", "weights"]} description={"Compute the weighted average along the specified axis."}>
      <Outline.Signature fullname="SecureAggregator.average" id="secretflow.security.aggregation.secure_aggregator.SecureAggregator.average">
        <Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[PYUObject](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYUObject "secretflow.device.device.pyu.PYUObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.security.aggregation.sparse_plain_aggregator"}

## secretflow\.security.aggregation.sparse\_plain\_aggregator module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [`SparsePlainAggregator`](#secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator "secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator")(device)
      </td>

      <td>
        Plaintext sparse aggregator.
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator"} module={"secretflow.security.aggregation.sparse_plain_aggregator"} fullname={"SparsePlainAggregator"} parameters={["device"]} description={"Bases: PlainAggregator"}>
  <Outline.Signature fullname="SparsePlainAggregator" id="secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.sparse\_plain\_aggregator.</Outline.Prefix><Outline.Name>SparsePlainAggregator</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`PlainAggregator`](#secretflow.security.aggregation.plain_aggregator.PlainAggregator "secretflow.security.aggregation.plain_aggregator.PlainAggregator")

    Plaintext sparse aggregator.

    The computation will be performed in (decoded) plaintext.

    <Container type="warning">
      SparsePlainAggregator is for debugging purpose only.
      You should not use it in production.
    </Container>

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> # Alice and bob are both pyu instances.
    >>> aggregator = SparsePlainAggregator(alice)
    >>> a = alice(lambda : np.random.rand(2, 5))()
    >>> b = bob(lambda : np.random.rand(2, 5))()
    >>> sum_a_b = aggregator.sum([a, b], axis=0)
    >>> # Get the result.
    >>> sf.reveal(sum_a_b)
    ```

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator.sum "secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator.average "secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator.sum"} module={"secretflow.security.aggregation.sparse_plain_aggregator"} fullname={"SparsePlainAggregator.sum"} parameters={["data", "axis"]} description={"Sum of array elements over a given axis."}>
      <Outline.Signature fullname="SparsePlainAggregator.sum" id="secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator.sum">
        <Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.mean()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the sum.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator.average"} module={"secretflow.security.aggregation.sparse_plain_aggregator"} fullname={"SparsePlainAggregator.average"} parameters={["data", "axis", "weights"]} description={"Compute the weighted average along the specified axis."}>
      <Outline.Signature fullname="SparsePlainAggregator.average" id="secretflow.security.aggregation.sparse_plain_aggregator.SparsePlainAggregator.average">
        <Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.average()`.
              - <Outline.ParameterTarget>weights</Outline.ParameterTarget> – optional. Same as the weights argument of `numpy.average()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the weighted average.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.security.aggregation.spu_aggregator"}

## secretflow\.security.aggregation.spu\_aggregator module

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [`SPUAggregator`](#secretflow.security.aggregation.spu_aggregator.SPUAggregator "secretflow.security.aggregation.spu_aggregator.SPUAggregator")(device)
      </td>

      <td>
        Aggregator based on SPU.
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.spu_aggregator.SPUAggregator"} module={"secretflow.security.aggregation.spu_aggregator"} fullname={"SPUAggregator"} parameters={["device"]} description={"Bases: Aggregator"}>
  <Outline.Signature fullname="SPUAggregator" id="secretflow.security.aggregation.spu_aggregator.SPUAggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.spu\_aggregator.</Outline.Prefix><Outline.Name>SPUAggregator</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[SPU](secretflow.device.device.device.mdx#secretflow.device.device.spu.SPU "secretflow.device.device.spu.SPU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`Aggregator`](#secretflow.security.aggregation.aggregator.Aggregator "secretflow.security.aggregation.aggregator.Aggregator")

    Aggregator based on SPU.

    The computation will be performed on the given SPU device.

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> # spu shall be an SPU device instance.
    >>> aggregator = SPUAggregator(spu)
    >>> # Alice and bob are both pyu instances.
    >>> a = alice(lambda : np.random.rand(2, 5))()
    >>> b = bob(lambda : np.random.rand(2, 5))()
    >>> sum_a_b = aggregator.sum([a, b], axis=0)
    >>> # Get the result.
    >>> sf.reveal(sum_a_b)
    array([[0.5954927 , 0.9381409 , 0.99397117, 1.551537  , 0.3269863 ],
      [1.288345  , 1.1820003 , 1.1769378 , 0.7396539 , 1.215364  ]],
      dtype=float32)
    >>> average_a_b = aggregator.average([a, b], axis=0)
    >>> sf.reveal(average_a_b)
    array([[0.29774636, 0.46907043, 0.49698558, 0.7757685 , 0.16349316],
      [0.6441725 , 0.5910001 , 0.5884689 , 0.3698269 , 0.607682  ]],
      dtype=float32)
    ```

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`__init__`](#secretflow.security.aggregation.spu_aggregator.SPUAggregator.__init__ "secretflow.security.aggregation.spu_aggregator.SPUAggregator.__init__")(device)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.spu_aggregator.SPUAggregator.sum "secretflow.security.aggregation.spu_aggregator.SPUAggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.spu_aggregator.SPUAggregator.average "secretflow.security.aggregation.spu_aggregator.SPUAggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.spu_aggregator.SPUAggregator.__init__"} module={"secretflow.security.aggregation.spu_aggregator"} fullname={"SPUAggregator.__init__"} parameters={["device"]} description={"Bases: Aggregator"}>
      <Outline.Signature fullname="SPUAggregator.__init__" id="secretflow.security.aggregation.spu_aggregator.SPUAggregator.__init__">
        <Outline.Name>\_\_init\_\_</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[SPU](secretflow.device.device.device.mdx#secretflow.device.device.spu.SPU "secretflow.device.device.spu.SPU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content />
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.spu_aggregator.SPUAggregator.sum"} module={"secretflow.security.aggregation.spu_aggregator"} fullname={"SPUAggregator.sum"} parameters={["data", "axis"]} description={"Sum of array elements over a given axis."}>
      <Outline.Signature fullname="SPUAggregator.sum" id="secretflow.security.aggregation.spu_aggregator.SPUAggregator.sum">
        <Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[SPUObject](secretflow.device.device.device.mdx#secretflow.device.device.spu.SPUObject "secretflow.device.device.spu.SPUObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.mean()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the sum.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.spu_aggregator.SPUAggregator.average"} module={"secretflow.security.aggregation.spu_aggregator"} fullname={"SPUAggregator.average"} parameters={["data", "axis", "weights"]} description={"Compute the weighted average along the specified axis."}>
      <Outline.Signature fullname="SPUAggregator.average" id="secretflow.security.aggregation.spu_aggregator.SPUAggregator.average">
        <Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[SPUObject](secretflow.device.device.device.mdx#secretflow.device.device.spu.SPUObject "secretflow.device.device.spu.SPUObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.average()`.
              - <Outline.ParameterTarget>weights</Outline.ParameterTarget> – optional. Same as the weights argument of `numpy.average()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the weighted average.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

:target{id="module-secretflow.security.aggregation"}

## Module contents

<strong>Classes:</strong>

<table>
  <tbody>
    <tr>
      <td>
        [`Aggregator`](#secretflow.security.aggregation.Aggregator "secretflow.security.aggregation.Aggregator")()
      </td>

      <td>
        The abstract aggregator.
      </td>
    </tr>

    <tr>
      <td>
        [`SecureAggregator`](#secretflow.security.aggregation.SecureAggregator "secretflow.security.aggregation.SecureAggregator")(device, participants\[, ...])
      </td>

      <td>
        The secure aggregation implementation of <cite>Masking with One-Time Pads</cite>.
      </td>
    </tr>

    <tr>
      <td>
        [`PlainAggregator`](#secretflow.security.aggregation.PlainAggregator "secretflow.security.aggregation.PlainAggregator")(device)
      </td>

      <td>
        Plaintext aggregator.
      </td>
    </tr>

    <tr>
      <td>
        [`SPUAggregator`](#secretflow.security.aggregation.SPUAggregator "secretflow.security.aggregation.SPUAggregator")(device)
      </td>

      <td>
        Aggregator based on SPU.
      </td>
    </tr>

    <tr>
      <td>
        [`SparsePlainAggregator`](#secretflow.security.aggregation.SparsePlainAggregator "secretflow.security.aggregation.SparsePlainAggregator")(device)
      </td>

      <td>
        Plaintext sparse aggregator.
      </td>
    </tr>
  </tbody>
</table>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.Aggregator"} module={"secretflow.security.aggregation"} fullname={"Aggregator"} description={"Bases: ABC"}>
  <Outline.Signature fullname="Aggregator" id="secretflow.security.aggregation.Aggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.</Outline.Prefix><Outline.Name>Aggregator</Outline.Name>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`ABC`](https://docs.python.org/3/library/abc.html#abc.ABC "(in Python v3.12)")

    The abstract aggregator.

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.Aggregator.sum "secretflow.security.aggregation.Aggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.Aggregator.average "secretflow.security.aggregation.Aggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.Aggregator.sum"} module={"secretflow.security.aggregation"} fullname={"Aggregator.sum"} description={"Sum of array elements over a given axis."} parameters={["data", "axis"]}>
      <Outline.Signature fullname="Aggregator.sum" id="secretflow.security.aggregation.Aggregator.sum">
        <Outline.Keyword>abstract<span>{" "}</span></Outline.Keyword><Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.Aggregator.average"} module={"secretflow.security.aggregation"} fullname={"Aggregator.average"} description={"Compute the weighted average along the specified axis."} parameters={["data", "axis", "weights"]}>
      <Outline.Signature fullname="Aggregator.average" id="secretflow.security.aggregation.Aggregator.average">
        <Outline.Keyword>abstract<span>{" "}</span></Outline.Keyword><Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.SecureAggregator"} module={"secretflow.security.aggregation"} fullname={"SecureAggregator"} parameters={["device", "participants", "fxp_bits"]} description={"Bases: Aggregator"}>
  <Outline.Signature fullname="SecureAggregator" id="secretflow.security.aggregation.SecureAggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.</Outline.Prefix><Outline.Name>SecureAggregator</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter>, <Outline.Parameter><span className="name">participants</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">fxp\_bits</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.12)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>18</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`Aggregator`](#secretflow.security.aggregation.aggregator.Aggregator "secretflow.security.aggregation.aggregator.Aggregator")

    The secure aggregation implementation of <cite>Masking with One-Time Pads</cite>.

    <cite>Masking with One-Time Pads</cite> negotiates a secret for every two participants,
    then uses the secret to hide its input <cite>x</cite>, and each participant outputs.

    <Math>
      $$
      y_u = x_u + \sum _{u < v}S_{u,v} - \sum_{u>v}S_{u,v}\quad(mod\:R)


      $$
    </Math>

    the secrets are cancelled out after aggregation and then we can get the correct result.

    <Math>
      $$
      \sum y = \sum x


      $$
    </Math>

    For example, the participants Alice, Bob, and Carol each own <InlineMath>$x_1, x_2, x_3$</InlineMath>,
    negotiate the secret <InlineMath>$s_{a,b}, s_{a,c}, s_{b,c}$</InlineMath>, and then output:

    <Math>
      $$
      y_1 = x_1 + s_{a,b} + s_{a,c}


      $$
    </Math>

    <Math>
      $$
      y_2 = x_2 - s_{a,b} + s_{b,c}


      $$
    </Math>

    <Math>
      $$
      y_3 = x_3 - s_{a,c} - s_{b,c}


      $$
    </Math>

    then it is easy to get

    <Math>
      $$
      y_1 + y_2 + y_3 = x_1 + s_{a,b} + s_{a,c} + x_2 - s_{a,b} + s_{b,c} + x_3 - s_{a,c} - s_{b,c}
      = x_1 + x_2 + x_3


      $$
    </Math>

    <p className="sidebar-rubric">
      Notes
    </p>

    <cite>Masking with One-Time Pads</cite> is based on semi-honest assumptions
    and does not support client dropping. For more information, please refer to
    [Practical Secure Aggregation for Privacy-Preserving Machine Learning](https://eprint.iacr.org/2017/281.pdf)

    <Container type="warning">
      The SecureAggregator uses `numpy.random.PCG64()`. There are many
      discussions of whether PCG is a CSPRNG
      (e.g. [https://crypto.stackexchange.com/questions/77101/is-the-pcg-prng-a-csprng-or-why-not](https://crypto.stackexchange.com/questions/77101/is-the-pcg-prng-a-csprng-or-why-not)),
      we prefer a conservative strategy unless a further security analysis came
      up. Therefore we recommend users to use a standardized CSPRNG in industrial
      scenarios.
    </Container>

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> # Alice and bob are both pyu instances.
    >>> aggregator = SecureAggregator(alice, [alice, bob])
    >>> a = alice(lambda : np.random.rand(2, 5))()
    >>> b = bob(lambda : np.random.rand(2, 5))()
    >>> sum_a_b = aggregator.sum([a, b], axis=0)
    >>> # Get the result.
    >>> sf.reveal(sum_a_b)
    array([[0.5954927 , 0.9381409 , 0.99397117, 1.551537  , 0.3269863 ],
    [1.288345  , 1.1820003 , 1.1769378 , 0.7396539 , 1.215364  ]],
    dtype=float32)
    >>> average_a_b = aggregator.average([a, b], axis=0)
    >>> sf.reveal(average_a_b)
    array([[0.29774636, 0.46907043, 0.49698558, 0.7757685 , 0.16349316],
    [0.6441725 , 0.5910001 , 0.5884689 , 0.3698269 , 0.607682  ]],
    dtype=float32)
    ```

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`__init__`](#secretflow.security.aggregation.SecureAggregator.__init__ "secretflow.security.aggregation.SecureAggregator.__init__")(device, participants\[, fxp\_bits])
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.SecureAggregator.sum "secretflow.security.aggregation.SecureAggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.SecureAggregator.average "secretflow.security.aggregation.SecureAggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.SecureAggregator.__init__"} module={"secretflow.security.aggregation"} fullname={"SecureAggregator.__init__"} parameters={["device", "participants", "fxp_bits"]} description={"Bases: Aggregator"}>
      <Outline.Signature fullname="SecureAggregator.__init__" id="secretflow.security.aggregation.SecureAggregator.__init__">
        <Outline.Name>\_\_init\_\_</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter>, <Outline.Parameter><span className="name">participants</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">fxp\_bits</span><span>:</span><span>{" "}</span><span className="name">[int](https://docs.python.org/3/library/functions.html#int "(in Python v3.12)")</span><span>{" "}</span><span>=</span><span>{" "}</span><span>18</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content />
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.SecureAggregator.sum"} module={"secretflow.security.aggregation"} fullname={"SecureAggregator.sum"} parameters={["data", "axis"]} description={"Sum of array elements over a given axis."}>
      <Outline.Signature fullname="SecureAggregator.sum" id="secretflow.security.aggregation.SecureAggregator.sum">
        <Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[PYUObject](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYUObject "secretflow.device.device.pyu.PYUObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.SecureAggregator.average"} module={"secretflow.security.aggregation"} fullname={"SecureAggregator.average"} parameters={["data", "axis", "weights"]} description={"Compute the weighted average along the specified axis."}>
      <Outline.Signature fullname="SecureAggregator.average" id="secretflow.security.aggregation.SecureAggregator.average">
        <Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[PYUObject](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYUObject "secretflow.device.device.pyu.PYUObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.PlainAggregator"} module={"secretflow.security.aggregation"} fullname={"PlainAggregator"} parameters={["device"]} description={"Bases: Aggregator"}>
  <Outline.Signature fullname="PlainAggregator" id="secretflow.security.aggregation.PlainAggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.</Outline.Prefix><Outline.Name>PlainAggregator</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`Aggregator`](#secretflow.security.aggregation.aggregator.Aggregator "secretflow.security.aggregation.aggregator.Aggregator")

    Plaintext aggregator.

    The computation will be performed in plaintext.

    <Container type="warning">
      PlainAggregator is for debugging purpose only.
      You should not use it in production.
    </Container>

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> # Alice and bob are both pyu instances.
    >>> aggregator = PlainAggregator(alice)
    >>> a = alice(lambda : np.random.rand(2, 5))()
    >>> b = bob(lambda : np.random.rand(2, 5))()
    >>> sum_a_b = aggregator.sum([a, b], axis=0)
    >>> # Get the result.
    >>> sf.reveal(sum_a_b)
    array([[0.5954927 , 0.9381409 , 0.99397117, 1.551537  , 0.32698634],
      [1.288345  , 1.1820003 , 1.1769378 , 0.7396539 , 1.215364  ]],
      dtype=float32)
    >>> average_a_b = aggregator.average([a, b], axis=0)
    >>> sf.reveal(average_a_b)
    array([[0.29774636, 0.46907046, 0.49698558, 0.7757685 , 0.16349317],
      [0.6441725 , 0.59100014, 0.5884689 , 0.36982694, 0.607682  ]],
      dtype=float32)
    ```

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`__init__`](#secretflow.security.aggregation.PlainAggregator.__init__ "secretflow.security.aggregation.PlainAggregator.__init__")(device)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.PlainAggregator.sum "secretflow.security.aggregation.PlainAggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.PlainAggregator.average "secretflow.security.aggregation.PlainAggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.PlainAggregator.__init__"} module={"secretflow.security.aggregation"} fullname={"PlainAggregator.__init__"} parameters={["device"]} description={"Bases: Aggregator"}>
      <Outline.Signature fullname="PlainAggregator.__init__" id="secretflow.security.aggregation.PlainAggregator.__init__">
        <Outline.Name>\_\_init\_\_</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content />
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.PlainAggregator.sum"} module={"secretflow.security.aggregation"} fullname={"PlainAggregator.sum"} parameters={["data", "axis"]} description={"Sum of array elements over a given axis."}>
      <Outline.Signature fullname="PlainAggregator.sum" id="secretflow.security.aggregation.PlainAggregator.sum">
        <Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[PYUObject](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYUObject "secretflow.device.device.pyu.PYUObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.mean()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the sum.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.PlainAggregator.average"} module={"secretflow.security.aggregation"} fullname={"PlainAggregator.average"} parameters={["data", "axis", "weights"]} description={"Compute the weighted average along the specified axis."}>
      <Outline.Signature fullname="PlainAggregator.average" id="secretflow.security.aggregation.PlainAggregator.average">
        <Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[PYUObject](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYUObject "secretflow.device.device.pyu.PYUObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.average()`.
              - <Outline.ParameterTarget>weights</Outline.ParameterTarget> – optional. Same as the weights argument of `numpy.average()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the weighted average.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.SPUAggregator"} module={"secretflow.security.aggregation"} fullname={"SPUAggregator"} parameters={["device"]} description={"Bases: Aggregator"}>
  <Outline.Signature fullname="SPUAggregator" id="secretflow.security.aggregation.SPUAggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.</Outline.Prefix><Outline.Name>SPUAggregator</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[SPU](secretflow.device.device.device.mdx#secretflow.device.device.spu.SPU "secretflow.device.device.spu.SPU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`Aggregator`](#secretflow.security.aggregation.aggregator.Aggregator "secretflow.security.aggregation.aggregator.Aggregator")

    Aggregator based on SPU.

    The computation will be performed on the given SPU device.

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> # spu shall be an SPU device instance.
    >>> aggregator = SPUAggregator(spu)
    >>> # Alice and bob are both pyu instances.
    >>> a = alice(lambda : np.random.rand(2, 5))()
    >>> b = bob(lambda : np.random.rand(2, 5))()
    >>> sum_a_b = aggregator.sum([a, b], axis=0)
    >>> # Get the result.
    >>> sf.reveal(sum_a_b)
    array([[0.5954927 , 0.9381409 , 0.99397117, 1.551537  , 0.3269863 ],
      [1.288345  , 1.1820003 , 1.1769378 , 0.7396539 , 1.215364  ]],
      dtype=float32)
    >>> average_a_b = aggregator.average([a, b], axis=0)
    >>> sf.reveal(average_a_b)
    array([[0.29774636, 0.46907043, 0.49698558, 0.7757685 , 0.16349316],
      [0.6441725 , 0.5910001 , 0.5884689 , 0.3698269 , 0.607682  ]],
      dtype=float32)
    ```

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`__init__`](#secretflow.security.aggregation.SPUAggregator.__init__ "secretflow.security.aggregation.SPUAggregator.__init__")(device)
          </td>

          <td>

          </td>
        </tr>

        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.SPUAggregator.sum "secretflow.security.aggregation.SPUAggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.SPUAggregator.average "secretflow.security.aggregation.SPUAggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.SPUAggregator.__init__"} module={"secretflow.security.aggregation"} fullname={"SPUAggregator.__init__"} parameters={["device"]} description={"Bases: Aggregator"}>
      <Outline.Signature fullname="SPUAggregator.__init__" id="secretflow.security.aggregation.SPUAggregator.__init__">
        <Outline.Name>\_\_init\_\_</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[SPU](secretflow.device.device.device.mdx#secretflow.device.device.spu.SPU "secretflow.device.device.spu.SPU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
      </Outline.Signature>

      <Outline.Content />
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.SPUAggregator.sum"} module={"secretflow.security.aggregation"} fullname={"SPUAggregator.sum"} parameters={["data", "axis"]} description={"Sum of array elements over a given axis."}>
      <Outline.Signature fullname="SPUAggregator.sum" id="secretflow.security.aggregation.SPUAggregator.sum">
        <Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[SPUObject](secretflow.device.device.device.mdx#secretflow.device.device.spu.SPUObject "secretflow.device.device.spu.SPUObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.mean()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the sum.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.SPUAggregator.average"} module={"secretflow.security.aggregation"} fullname={"SPUAggregator.average"} parameters={["data", "axis", "weights"]} description={"Compute the weighted average along the specified axis."}>
      <Outline.Signature fullname="SPUAggregator.average" id="secretflow.security.aggregation.SPUAggregator.average">
        <Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[SPUObject](secretflow.device.device.device.mdx#secretflow.device.device.spu.SPUObject "secretflow.device.device.spu.SPUObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.average()`.
              - <Outline.ParameterTarget>weights</Outline.ParameterTarget> – optional. Same as the weights argument of `numpy.average()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the weighted average.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>

<Outline domain="py" objectType="class" target={"secretflow.security.aggregation.SparsePlainAggregator"} module={"secretflow.security.aggregation"} fullname={"SparsePlainAggregator"} parameters={["device"]} description={"Bases: PlainAggregator"}>
  <Outline.Signature fullname="SparsePlainAggregator" id="secretflow.security.aggregation.SparsePlainAggregator">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>secretflow\.security.aggregation.</Outline.Prefix><Outline.Name>SparsePlainAggregator</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">device</span><span>:</span><span>{" "}</span><span className="name">[PYU](secretflow.device.device.device.mdx#secretflow.device.device.pyu.PYU "secretflow.device.device.pyu.PYU")</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    Bases: [`PlainAggregator`](#secretflow.security.aggregation.plain_aggregator.PlainAggregator "secretflow.security.aggregation.plain_aggregator.PlainAggregator")

    Plaintext sparse aggregator.

    The computation will be performed in (decoded) plaintext.

    <Container type="warning">
      SparsePlainAggregator is for debugging purpose only.
      You should not use it in production.
    </Container>

    <p className="sidebar-rubric">
      Examples
    </p>

    ```python
    >>> # Alice and bob are both pyu instances.
    >>> aggregator = SparsePlainAggregator(alice)
    >>> a = alice(lambda : np.random.rand(2, 5))()
    >>> b = bob(lambda : np.random.rand(2, 5))()
    >>> sum_a_b = aggregator.sum([a, b], axis=0)
    >>> # Get the result.
    >>> sf.reveal(sum_a_b)
    ```

    <strong>Methods:</strong>

    <table>
      <tbody>
        <tr>
          <td>
            [`sum`](#secretflow.security.aggregation.SparsePlainAggregator.sum "secretflow.security.aggregation.SparsePlainAggregator.sum")(data\[, axis])
          </td>

          <td>
            Sum of array elements over a given axis.
          </td>
        </tr>

        <tr>
          <td>
            [`average`](#secretflow.security.aggregation.SparsePlainAggregator.average "secretflow.security.aggregation.SparsePlainAggregator.average")(data\[, axis, weights])
          </td>

          <td>
            Compute the weighted average along the specified axis.
          </td>
        </tr>
      </tbody>
    </table>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.SparsePlainAggregator.sum"} module={"secretflow.security.aggregation"} fullname={"SparsePlainAggregator.sum"} parameters={["data", "axis"]} description={"Sum of array elements over a given axis."}>
      <Outline.Signature fullname="SparsePlainAggregator.sum" id="secretflow.security.aggregation.SparsePlainAggregator.sum">
        <Outline.Name>sum</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Sum of array elements over a given axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.mean()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the sum.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>

    <Outline domain="py" objectType="method" target={"secretflow.security.aggregation.SparsePlainAggregator.average"} module={"secretflow.security.aggregation"} fullname={"SparsePlainAggregator.average"} parameters={["data", "axis", "weights"]} description={"Compute the weighted average along the specified axis."}>
      <Outline.Signature fullname="SparsePlainAggregator.average" id="secretflow.security.aggregation.SparsePlainAggregator.average">
        <Outline.Name>average</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">data</span><span>:</span><span>{" "}</span><span className="name">[List](https://docs.python.org/3/library/typing.html#typing.List "(in Python v3.12)")<span>\[</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")<span>]</span></span></Outline.Parameter>, <Outline.Parameter><span className="name">axis</span><span>=</span><span>None</span></Outline.Parameter>, <Outline.Parameter><span className="name">weights</span><span>=</span><span>None</span></Outline.Parameter><span>)</span></Outline.ParameterList><Outline.ReturnType><span>{" \u2192 "}</span>[DeviceObject](secretflow.device.device.device.mdx#secretflow.device.device.base.DeviceObject "secretflow.device.device.base.DeviceObject")</Outline.ReturnType>
      </Outline.Signature>

      <Outline.Content>
        Compute the weighted average along the specified axis.

        <FieldList>
          <dl>
            <dt className="field-name">
              Parameters
            </dt>

            <dd className="field-body">
              - <Outline.ParameterTarget>data</Outline.ParameterTarget> – array of device objects.
              - <Outline.ParameterTarget>axis</Outline.ParameterTarget> – optional. Same as the axis argument of `numpy.average()`.
              - <Outline.ParameterTarget>weights</Outline.ParameterTarget> – optional. Same as the weights argument of `numpy.average()`.
            </dd>

            <dt className="field-name">
              Returns
            </dt>

            <dd className="field-body">
              a device object holds the weighted average.
            </dd>
          </dl>
        </FieldList>
      </Outline.Content>
    </Outline>
  </Outline.Content>
</Outline>
